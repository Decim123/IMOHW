## Agile 10. Основы ООП на С# (максимальный балл 22 + 8, дедлай 16.12.2025 включительно)

В данной работе вам предстоит реализовать мини-систему на заданную тему. 
Для каждого элемента системы реализовать набор тестов.
Оценивается как реализоация, так  и полнота тестирования.

Критерии оценивания:

 - Реализация одной команды из списка и тестов для нее - **0.65 балла**
   - Реализация одной команды из списка без тестов для нее - **0.2 балла**
 - Общая реализация, чистый код, структура проекта - **до 8 баллов**

❗❗❗❗❗❗❗❗❗❗❗❗❗❗❗❗❗❗❗❗❗❗❗❗

# ⚠ Штрафы

Работу нужно будет защитить с объяснением всего кода. Вы должны доказать, что код написан вами и вы в нем разбираетесь. 
Комментариев в коде быть не должно.
Если данное условие не выполнено, баллы за задание **не выставляются**.

❗❗❗❗❗❗❗❗❗❗❗❗❗❗❗❗❗❗❗❗❗❗❗❗

## Задание

### Сервис для управления расписанием занятий в университете

# Цель проекта

Создать оффлайн CLI-приложение для управления расписанием занятий в университете: создание/редактирование/удаление пар, работа с аудиториями, преподавателями, группами и предметами; генерация расписания; экспорт/импорт; проверка конфликтов. Хранение — плоские файлы (JSON/CSV).

# Краткие требования

1. CLI-интерфейс (без сетевой части).
2. Локальное хранение данных.
3. Поддержка импорта/экспорта JSON.
4. Базовые валидации и детекция конфликтов (аудитории, преподаватели, группы, пересечения по времени).
5. Возможность генерации отчётов (расписание группы, преподавателя, аудитории) в виде текстовых таблиц и экспорт в CSV/JSON.
6*. Простая система ролей/прав (локально: admin / user) — опционально, минимальная защита паролем.
8. Unit-тесты


# CLI — команды и опции (полный набор)

Ярлык CLI: `sched` (пример). Структура команд: `sched <entity> <action> [options]`.

1. Общие:

   * `sched init [--db PATH]` — инициализация БД и создание файла конфигурации.
   * `sched config show` — показать текущие настройки.
   * `sched backup --out path` — экспорт полной БД в файл (JSON).
   * `sched restore --from path` — восстановление из бэкапа.

2. Rooms:

   * `sched room add --code CODE --capacity N [--building B] [--attr JSON]`
   * `sched room list [--filter <expr>] [--sort field]`
   * `sched room show <id|code>`
   * `sched room update <id|code> [--code] [--capacity] ...`
   * `sched room delete <id|code>`

3. Teachers:

   * `sched teacher add --name "Ivanov I." [--email ...]`
   * `sched teacher list [--filter]`
   * `sched teacher show <id>`
   * `sched teacher update <id> ...`
   * `sched teacher delete <id>`

4. Groups:

   * `sched group add --code CS-2025 --size 30 [--year 2025]`
   * `sched group list` / `show` / `update` / `delete`

5. Courses:

   * `sched course add --title "Algorithms" [--code ALGO101] [--duration 90]`
   * `sched course list` / `show` / `update` / `delete`

6. Sessions (основная часть):

   * `sched session add --course COURSE_ID --teacher TEACHER_ID --group GROUP_ID --room ROOM_ID --date YYYY-MM-DD --start HH:MM --end HH:MM [--notes ""]`
     Пример повторения: `--dow MON` и `--recurrence weekly --from 2025-09-01 --to 2025-12-31`
   * `sched session list [--group GROUP|--teacher TEACHER|--room ROOM|--date DATE|--from DATE --to DATE] [--conflicts-only]`
   * `sched session show SESSION_ID`
   * `sched session update SESSION_ID [--room ROOM_ID] [--start HH:MM] ...`
   * `sched session delete SESSION_ID`
   * `sched session find-conflicts [--from DATE --to DATE]` — вывести все конфликты.
   * `sched session auto-generate --group GROUP_ID --pattern pattern.json` — (опция) автоматическая генерация по шаблону.

7. Import / Export:

   * `sched import csv --entity sessions --file path.csv [--mode append|replace]`
   * `sched export csv --entity sessions --out path.csv [--from DATE --to DATE]`
   * `sched import json --file path.json` / `sched export json --out path.json`

8. Reports:

   * `sched report group --group GROUP_ID --from DATE --to DATE [--format text|csv|json]`
   * `sched report teacher --teacher TEACHER_ID ...`
   * `sched report room --room ROOM_ID ...`
   * `sched report day --date DATE` — расписание на день.

9. User (опционально):

   * `sched user add --name ... --role admin|user`
   * `sched login --user NAME` — локальная проверка пароля (если включено).

# Примеры команд с ожидаемым выводом

1. Добавить аудиторию:

```
$ sched room add --code A-101 --capacity 40 --building "Main"
Room A-101 (id=1) created.
```

2. Создать пару (одноразовая):

```
$ sched session add --course 3 --teacher 2 --group 7 --room A-101 --date 2025-11-26 --start 10:00 --end 11:30
Session created: id=15, 2025-11-26 10:00-11:30, Room A-101, Teacher Ivanov I., Group CS-2025
```

3. Попытка создать конфликт:

```
$ sched session add --course 5 --teacher 2 --group 8 --room A-101 --date 2025-11-26 --start 11:00 --end 12:00
ERROR: Conflict detected: Room A-101 is occupied 10:00-11:30 (session id=15).
If you want to force add, use --force (not recommended).
```

# Отчёты и отображение

* Табличный текст (ASCII table) с колонками: Date, Start, End, Course, Teacher, Group, Room, Notes.
* Возможность печати расписания в виде удобочитаемой строки: для группы — список дней недели с парами.
* Экспорт в CSV/JSON.

# UI/UX в терминале (рекомендации)

1. Команды краткие и предсказуемые.
3. В интерактивных сценариях (например, `sched session add` без всех аргументов) — показать подсказки и интерактивный ввод.
4. Цветовое выделение ошибок/предупреждений (если терминал поддерживает) — optional.
5. Поддержка автодополнения команд (bash/zsh completion) — nice-to-have.

# Тесты и критерии приёмки

1. Unit-тесты для CRUD операций каждой сущности.
2. Тесты валидации времени (start < end).
3. Тесты конфликтов: create overlapping sessions for same room/teacher/group -> expect error.
4. Integration tests: import CSV with mixed валид/invalid строк → expect correct report.
6. Tests for export correctness (CSV content & headers).
7. Acceptance: ручные сценарии (см. ниже), приложение не падает, все операции возвращают корректный код выхода (0 — success, !=0 — error).

# Сценарии приёмки (Acceptance tests)

1. Инициализация: `sched init` создает пустую базу и конфиги.
2. Администратор добавляет 5 аудиторий, 10 преподавателей, 20 групп, 30 курсов.
3. Создание повторяющейся пары для группы: weekly on Monday 10:00-11:30 from 2025-09-01 to 2025-12-31 — видно в `sched session list --group`.
4. Попытка создать конфликт — система возвращает читаемое сообщение и отклоняет.
5. Экспорт расписания группы в CSV — файл читается и содержит корректные строки.
6. Импорт CSV с 100 строк: 95 добавлено, 5 — с ошибками; лог/отчёт показывает причины.
7. Найти конфликты — `sched session find-conflicts` выводит все проблемные пары.

# Формат возвратов и коды выхода

* При успешном выполнении: stdout с сообщением и код выхода `0`.
* При ошибке: stderr с читабельной причиной и код выхода `>0` (например 2 — validation error, 3 — db error, 4 — conflict).
* В CLI возвращать структурированные машинно-читаемые выходы при опции `--json` (для интеграции с другими утилитами).
