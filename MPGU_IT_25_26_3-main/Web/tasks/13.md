## Web 13. –û—Å–Ω–æ–≤—ã PostgreSQL (–º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –±–∞–ª–ª 14, –¥–µ–¥–ª–∞–π 09.12.2025 –≤–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ)

## –ö—Ä–∏—Ç–µ—Ä–∏–∏ –æ—Ü–µ–Ω–∫–∏ (–º–∞–∫—Å–∏–º—É–º 14 –±–∞–ª–ª–æ–≤)
–ó–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ –ø—É–Ω–∫—Ç–∞ –Ω–∞—á–∏—Å–ª—è–µ—Ç—Å—è 1 –±–∞–ª–ª

---

### ‚ö†Ô∏è –®—Ç—Ä–∞—Ñ—ã –∑–∞ —Å—Ç–∏–ª—å (–¥–æ ‚Äì2 –±–∞–ª–ª–æ–≤ —Å—É–º–º–∞—Ä–Ω–æ)

* –°–º–µ—à–∞–Ω–Ω—ã–π —Ä–µ–≥–∏—Å—Ç—Ä –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤ (`create TABLE` –≤–º–µ—Å—Ç–æ `CREATE TABLE`) ‚Äî ‚àí0.5
* –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ—Ç—Å—Ç—É–ø–æ–≤ –∏–ª–∏ –ø–µ—Ä–µ–Ω–æ—Å–æ–≤ —Å—Ç—Ä–æ–∫ ‚Äî ‚àí0.5
* CamelCase –≤ –∏–º–µ–Ω–∞—Ö —Ç–∞–±–ª–∏—Ü/–∫–æ–ª–æ–Ω–æ–∫ ‚Äî ‚àí0.5
* –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ `;` –≤ –∫–æ–Ω—Ü–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ ‚Äî ‚àí0.5

---

<details>
<summary><strong style="font-size: 16px;">–í–∞—Ä–∏–∞–Ω—Ç 1</strong></summary>

–í–∞–º –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω PostgreSQL-—Å–∫—Ä–∏–ø—Ç, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–∑–¥–∞—ë—Ç —É—á–µ–±–Ω—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ—á–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã.
–û–Ω–∞ –≤–∫–ª—é—á–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ —Å—É—â–Ω–æ—Å—Ç–∏:

* **author** ‚Äî –∞–≤—Ç–æ—Ä—ã –∫–Ω–∏–≥
* **book** ‚Äî –∫–Ω–∏–≥–∏ —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –∞–≤—Ç–æ—Ä–∞, –≥–æ–¥–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏, ISBN –∏ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏
* **library** ‚Äî –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
* **reader** ‚Äî —á–∏—Ç–∞—Ç–µ–ª–∏
* **reader_library** ‚Äî —Å–≤—è–∑—å —á–∏—Ç–∞—Ç–µ–ª—å ‚áÑ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ (MtM) —Å –Ω–æ–º–µ—Ä–æ–º —á–∏—Ç–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –±–∏–ª–µ—Ç–∞
* **library_book** ‚Äî —Å–≤—è–∑—å –∫–Ω–∏–≥–∞ ‚áÑ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ (MtM) —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤
* **issuance** ‚Äî –≤—ã–¥–∞—á–∞ –∫–Ω–∏–≥ —á–∏—Ç–∞—Ç–µ–ª—è–º

---

```sql
-- ==============================================
-- SCHEMA + SEED + –ó–ê–î–ê–ù–ò–Ø –î–õ–Ø –î–ï–ú–û–ù–°–¢–†–ê–¶–ò–ò JOIN
-- ==============================================

-- –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–µ —Ç–∞–±–ª–∏—Ü—ã, –µ—Å–ª–∏ –æ–Ω–∏ —Å—É—â–µ—Å—Ç–≤—É—é—Ç (–¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞)
DROP TABLE IF EXISTS issuance CASCADE;
DROP TABLE IF EXISTS library_book CASCADE;
DROP TABLE IF EXISTS reader_library CASCADE;
DROP TABLE IF EXISTS book CASCADE;
DROP TABLE IF EXISTS author CASCADE;
DROP TABLE IF EXISTS library CASCADE;
DROP TABLE IF EXISTS reader CASCADE;

-- =========================
-- DDL
-- =========================

CREATE TABLE author (
    id SERIAL PRIMARY KEY,
    name TEXT NOT NULL,
    birth_year INT
);

CREATE TABLE book (
    id SERIAL PRIMARY KEY,
    title TEXT NOT NULL,
    author_id INT REFERENCES author(id) ON DELETE SET NULL,
    year_published INT,
    isbn VARCHAR(40) UNIQUE,
    annotation TEXT
);

CREATE TABLE library (
    id SERIAL PRIMARY KEY,
    name TEXT NOT NULL,
    year_founded INT
);

CREATE TABLE reader (
    id SERIAL PRIMARY KEY,
    name TEXT NOT NULL
);

-- MtM: reader <-> library —Å –Ω–æ–º–µ—Ä–æ–º —á–∏—Ç–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –±–∏–ª–µ—Ç–∞
CREATE TABLE reader_library (
    library_id INT NOT NULL REFERENCES library(id) ON DELETE CASCADE,
    reader_id INT NOT NULL REFERENCES reader(id) ON DELETE CASCADE,
    card_number TEXT NOT NULL,
    membership_started DATE DEFAULT CURRENT_DATE,
    membership_ends DATE,
    PRIMARY KEY (library_id, reader_id),
    CONSTRAINT uniq_card_per_library UNIQUE (library_id, card_number)
);

-- MtM: book <-> library —Å –∞—Ç—Ä–∏–±—É—Ç–æ–º quantity
CREATE TABLE library_book (
    library_id INT NOT NULL REFERENCES library(id) ON DELETE CASCADE,
    book_id INT NOT NULL REFERENCES book(id) ON DELETE CASCADE,
    quantity INT NOT NULL CHECK (quantity >= 0),
    shelf TEXT,
    PRIMARY KEY (library_id, book_id)
);

-- Issuance (–≤—ã–¥–∞—á–∞)
CREATE TABLE issuance (
    id SERIAL PRIMARY KEY,
    library_id INT NOT NULL REFERENCES library(id) ON DELETE CASCADE,
    card_number TEXT NOT NULL,
    book_id INT NOT NULL REFERENCES book(id) ON DELETE RESTRICT,
    term_days INT NOT NULL CHECK (term_days > 0),
    issued_at DATE NOT NULL DEFAULT CURRENT_DATE,
    returned_at DATE,
    CONSTRAINT fk_reader_card FOREIGN KEY (library_id, card_number)
        REFERENCES reader_library (library_id, card_number)
        ON DELETE RESTRICT
);

CREATE INDEX idx_issuance_card ON issuance(library_id, card_number);
CREATE INDEX idx_issuance_book ON issuance(book_id);

-- =========================
-- SEED DATA
-- =========================

-- 1) –ê–≤—Ç–æ—Ä—ã (–≤—Å—Ç–∞–≤–ª—è–µ–º —è–≤–Ω—ã–µ id –¥–ª—è –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏)
INSERT INTO author (id, name, birth_year) VALUES
(1, '–§—ë–¥–æ—Ä –î–æ—Å—Ç–æ–µ–≤—Å–∫–∏–π', 1821),
(2, '–õ–µ–≤ –¢–æ–ª—Å—Ç–æ–π', 1828),
(3, '–ú–∞—Ä–≥–∞—Ä–µ—Ç –≠—Ç–≤—É–¥', 1939),
(4, '–î–∂–æ—Ä–¥–∂ –û—Ä—É—ç–ª–ª', 1903),
(5, '–•–∞—Ä—É–∫–∏ –ú—É—Ä–∞–∫–∞–º–∏', 1949),
(6, '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π –∞–≤—Ç–æ—Ä', NULL),
(7, '–î–∂–æ–Ω –°–º–∏—Ç', 1975),
(8, '–≠–º–∏–ª–∏ –ë—Ä–∞—É–Ω', 1982),
(9, '–ê–ª–µ–∫—Å–∞–Ω–¥—Ä –ö—É–ø—Ä–∏–Ω', 1870),
(10, '–ê–Ω–Ω–∞ –ö–∞—Ä–µ–Ω–∏–Ω–∞-–∞–≤—Ç–æ—Ä (–¥–µ–º–æ)', 1877),
(11, '–î–æ–ø. –∞–≤—Ç–æ—Ä 1', 1960),
(12, '–î–æ–ø. –∞–≤—Ç–æ—Ä 2', 1970),
(13, '–î–æ–ø. –∞–≤—Ç–æ—Ä 3', 1985);

-- –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å author_id
SELECT setval(pg_get_serial_sequence('author','id'), (SELECT COALESCE(MAX(id),0) FROM author));

-- 2) –ö–Ω–∏–≥–∏ (—è–≤–Ω—ã–µ id)
INSERT INTO book (id, title, author_id, year_published, isbn, annotation) VALUES
(1, '–ü—Ä–µ—Å—Ç—É–ø–ª–µ–Ω–∏–µ –∏ –Ω–∞–∫–∞–∑–∞–Ω–∏–µ', 1, 1866, '978-5-17-118366-1', '–†–æ–º–∞–Ω –æ –º–æ—Ä–∞–ª—å–Ω—ã—Ö –¥–∏–ª–µ–º–º–∞—Ö.'),
(2, '–í–æ–π–Ω–∞ –∏ –º–∏—Ä', 2, 1869, '978-5-17-084875-6', '–≠–ø–æ–ø–µ—è –æ –†–æ—Å—Å–∏–∏ —ç–ø–æ—Ö–∏ –ù–∞–ø–æ–ª–µ–æ–Ω–æ–≤—Å–∫–∏—Ö –≤–æ–π–Ω.'),
(3, '–†–∞—Å—Å–∫–∞–∑ —Å–ª—É–∂–∞–Ω–∫–∏', 3, 1985, '978-0-241-12239-1', '–ê–Ω—Ç–∏—É—Ç–æ–ø–∏—è.'),
(4, '1984', 4, 1949, '978-0-452-28423-4', '–ê–Ω—Ç–∏—É—Ç–æ–ø–∏—è –ø—Ä–æ —Ç–æ—Ç–∞–ª–∏—Ç–∞—Ä–∏–∑–º.'),
(5, '–ù–æ—Ä–≤–µ–∂—Å–∫–∏–π –ª–µ—Å', 5, 1987, '978-0-670-80752-0', '–†–æ–º–∞–Ω –æ –≤–∑—Ä–æ—Å–ª–µ–Ω–∏–∏.'),
(6, '–ò–¥–∏–æ—Ç', 1, 1869, '978-5-17-089565-5', '–û —á–µ–ª–æ–≤–µ–∫–µ —Å –Ω–µ–æ–±—ã—á–Ω–æ–π –¥–æ–±—Ä–æ—Ç–æ–π.'),
(7, '–ê–Ω–Ω–∞ –ö–∞—Ä–µ–Ω–∏–Ω–∞', 2, 1877, '978-5-699-98973-4', '–¢—Ä–∞–≥–µ–¥–∏—è –ª—é–±–≤–∏ –∏ –æ–±—â–µ—Å—Ç–≤–∞.'),
(8, '–•–æ—Ä –ª—é–±–∏–º—ã—Ö –∂–µ–Ω—â–∏–Ω', 5, 2013, '978-0-316-25280-9', '–°–±–æ—Ä–Ω–∏–∫ —Ä–∞—Å—Å–∫–∞–∑–æ–≤.'),
(9, '–ó–∞–≥–∞–¥–æ—á–Ω–∞—è –∫–Ω–∏–≥–∞', 6, 2000, NULL, '–ö–Ω–∏–≥–∞ —Å –Ω–µ—è—Å–Ω–æ–π –∞–≤—Ç–æ—Ä—Å–∫–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π.'),
(10, '–ü—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ –≤ –≥–æ—Ä—ã', 11, 2010, '111-1111111111', '–ü—Ä–∏–∫–ª—é—á–µ–Ω—á–µ—Å–∫–∞—è –∫–Ω–∏–≥–∞.'),
(11, '–¢–∞–π–Ω—ã–µ —Å–Ω—ã', 12, 2018, '222-2222222222', '–†–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–∑–∞.'),
(12, '–ö–Ω–∏–≥–∞ –±–µ–∑ –∞–≤—Ç–æ—Ä–∞', NULL, 2020, '333-3333333333', '–ü—Ä–µ–¥–Ω–∞–º–µ—Ä–µ–Ω–Ω–æ –±–µ–∑ –∞–≤—Ç–æ—Ä–∞.'),
(13, '–†–µ–¥–∫–∞—è —Ä—É–∫–æ–ø–∏—Å—å', NULL, NULL, NULL, '–†–µ–¥–∫–∞—è —Ä—É–∫–æ–ø–∏—Å—å.'),
(14, '–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∫–Ω–∏–≥–∞ A', 7, 2005, '444-4444444444', '–î–æ–ø. –¥–ª—è –¥–µ–º–æ.'),
(15, '–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∫–Ω–∏–≥–∞ B', 8, 2012, '555-5555555555', '–î–æ–ø. –¥–ª—è –¥–µ–º–æ.');

SELECT setval(pg_get_serial_sequence('book','id'), (SELECT COALESCE(MAX(id),0) FROM book));

-- 3) –ë–∏–±–ª–∏–æ—Ç–µ–∫–∏
INSERT INTO library (id, name, year_founded) VALUES
(1, '–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –≥–æ—Ä–æ–¥—Å–∫–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞', 1952),
(2, '–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –Ω–∞ –¢–∏—Ö–æ–π —É–ª–∏—Ü–µ', 1998),
(3, '–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –Ω–∞ —Ö–æ–ª–º–µ', 2005),
(4, '–°—Ç–∞—Ä–∞—è —Ä–∞–π–æ–Ω–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞', NULL),
(5, '–ú–∞–ª–µ–Ω—å–∫–∏–π —á–∏—Ç–∞–ª—ã–π –∫–ª—É–±', 2023);

SELECT setval(pg_get_serial_sequence('library','id'), (SELECT COALESCE(MAX(id),0) FROM library));

-- 4) –ß–∏—Ç–∞—Ç–µ–ª–∏
INSERT INTO reader (id, name) VALUES
(1, '–ê–ª–µ–∫—Å–µ–π –ò–≤–∞–Ω–æ–≤'),
(2, '–ú–∞—Ä–∏—è –°–º–∏—Ä–Ω–æ–≤–∞'),
(3, '–û–ª—å–≥–∞ –ü–µ—Ç—Ä–æ–≤–∞'),
(4, '–ò–≥–æ—Ä—å –ö—É–∑–Ω–µ—Ü–æ–≤'),
(5, '–ß–∏—Ç–∞—Ç–µ–ª—å –±–µ–∑ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏'),
(6, '–í–µ—Ç–µ—Ä–∞–Ω —á—Ç–µ–Ω–∏—è'),
(7, '–ü–æ—Å—Ç–æ—è–Ω–Ω—ã–π –ø–æ—Å–µ—Ç–∏—Ç–µ–ª—å'),
(8, '–ì–æ—Å—Ç—å');

SELECT setval(pg_get_serial_sequence('reader','id'), (SELECT COALESCE(MAX(id),0) FROM reader));

-- 5) –°–≤—è–∑–∏ reader_library (–Ω–æ–º–µ—Ä–∞ —á–∏—Ç–∞—Ç–µ–ª—å—Å–∫–∏—Ö –±–∏–ª–µ—Ç–æ–≤)
INSERT INTO reader_library (library_id, reader_id, card_number, membership_started) VALUES
(1, 1, 'C-0001', '2020-02-10'),
(1, 2, 'C-0002', '2021-06-15'),
(2, 3, 'T-1001', '2022-01-05'),
(2, 4, 'T-1002', '2023-09-20'),
(2, 1, 'T-2001', '2024-03-01'),
(1, 5, 'C-0100', '2024-05-10'),
(3, 6, 'H-2001', '2023-01-01'),
(4, 7, 'O-3001', '2024-12-01'),
(5, 4, 'M-5001', '2025-02-20');

-- 6) library_book (–∫–Ω–∏–∂–Ω—ã–µ —Ñ–æ–Ω–¥—ã)
INSERT INTO library_book (library_id, book_id, quantity, shelf) VALUES
-- –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ 1
(1, 1, 3, 'A-1'),
(1, 2, 1, 'A-2'),
(1, 4, 2, 'B-1'),
(1, 6, 1, 'A-3'),
(1, 5, 1, 'B-2'),
-- –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ 2
(2, 3, 4, 'C-1'),
(2, 5, 2, 'C-2'),
(2, 7, 1, 'C-3'),
(2, 8, 2, 'C-4'),
-- –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ 3
(3, 9, 2, 'D-1'),
(3, 10, 1, 'D-2'),
(3, 15, 1, 'D-3'),
-- –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ 4
(4, 11, 3, 'E-1'),
-- –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ 5
(5, 12, 1, 'F-1'),
(5, 13, 2, 'F-2'),
(5, 14, 1, 'F-3');

-- 7) –í—ã–¥–∞—á–∏ (issuance)
INSERT INTO issuance (library_id, card_number, book_id, term_days, issued_at) VALUES
-- –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ 1
(1, 'C-0001', 1, 21, '2025-11-01'),
(1, 'C-0002', 4, 14, '2025-10-28'),
(1, 'C-0001', 6, 30, '2025-09-15'),
-- –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ 2
(2, 'T-1001', 3, 14, '2025-11-10'),
(2, 'T-1002', 5, 21, '2025-11-05'),
(2, 'T-2001', 8, 14, '2025-10-20'),
-- –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ 3
(3, 'H-2001', 9, 14, '2025-11-01'),
(3, 'H-2001', 10, 30, '2025-11-05'),
-- –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ 4
(4, 'O-3001', 11, 21, '2025-11-10'),
-- –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ 5
(5, 'M-5001', 12, 7, '2025-11-05'),
(5, 'M-5001', 13, 14, '2025-11-12');
```

# üß© –ó–∞–¥–∞–Ω–∏—è –ø–æ JOIN

(–ø–æ 2 –∑–∞–¥–∞—á–∏ –Ω–∞ –∫–∞–∂–¥—ã–π —Ç–∏–ø —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è)

## 1. INNER JOIN

1.1. –í—ã–≤–µ–¥–∏—Ç–µ —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∫–Ω–∏–≥ —Å –∏—Ö –∞–≤—Ç–æ—Ä–∞–º–∏ –∏ –≥–æ–¥–æ–º –ø—É–±–ª–∏–∫–∞—Ü–∏–∏.
1.2. –ù–∞–π–¥–∏—Ç–µ –≤—Å–µ —Å–æ—á–µ—Ç–∞–Ω–∏—è (–±–∏–±–ª–∏–æ—Ç–µ–∫–∞ ‚Äî –∫–Ω–∏–≥–∞), –≥–¥–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ > 0, –∏ –ø–æ–∫–∞–∂–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏, –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–Ω–∏–≥–∏ –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ.

---

## 2. LEFT JOIN

2.1. –í—ã–≤–µ–¥–∏—Ç–µ –≤—Å–µ –∫–Ω–∏–≥–∏ –∏, –µ—Å–ª–∏ –∫–Ω–∏–≥–∞ –≤—Å—Ç—Ä–µ—á–∞–µ—Ç—Å—è –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫–µ, ‚Äî –Ω–∞–∑–≤–∞–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ; –µ—Å–ª–∏ –Ω–µ—Ç ‚Äî `NULL` –≤ –ø–æ–ª—è—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫–∏.
2.2. –î–ª—è –∫–∞–∂–¥–æ–≥–æ –∞–≤—Ç–æ—Ä–∞ –≤—ã–≤–µ–¥–∏—Ç–µ –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ –µ–≥–æ –∫–Ω–∏–≥ –≤–æ –≤—Å–µ—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫–∞—Ö, –≤–∫–ª—é—á–∞—è –∞–≤—Ç–æ—Ä–æ–≤, —É –∫–æ—Ç–æ—Ä—ã—Ö –∫–Ω–∏–≥ –Ω–µ—Ç.

---

## 3. RIGHT JOIN

3.1. –ü–æ–∫–∞–∂–∏—Ç–µ –≤—Å–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –∏ –∫–Ω–∏–≥–∏ –≤ –Ω–∏—Ö; –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –±–µ–∑ –∫–Ω–∏–≥ —Ç–∞–∫–∂–µ –¥–æ–ª–∂–Ω—ã –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å.
3.2. –î–ª—è –∫–∞–∂–¥–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –≤—ã—á–∏—Å–ª–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–π –∫–Ω–∏–≥, –≤–∫–ª—é—á–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –±–µ–∑ –∫–Ω–∏–≥.

---

## 4. FULL JOIN

4.1. –ü–æ—Å—Ç—Ä–æ–π—Ç–µ –Ω–∞–±–æ—Ä —Å—Ç—Ä–æ–∫, –ø–æ–∫–∞–∑—ã–≤–∞—é—â–∏–π –≤—Å–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ ¬´–∫–Ω–∏–≥–∞ ‚Äî –±–∏–±–ª–∏–æ—Ç–µ–∫–∞¬ª, –≥–¥–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –ª–∏–±–æ –≤ —Ç–∞–±–ª–∏—Ü–µ –∫–Ω–∏–≥, –ª–∏–±–æ –≤ —Ñ–æ–Ω–¥–µ –±–∏–±–ª–∏–æ—Ç–µ–∫, –ª–∏–±–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ.
4.2. –ü–æ—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ—á–µ–Ω—å –≤—Å–µ—Ö –∞–≤—Ç–æ—Ä–æ–≤ –∏ –≤—Å–µ—Ö –∫–Ω–∏–≥ —Ç–∞–∫, —á—Ç–æ–±—ã –±—ã–ª–∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω—ã:

* –∫–Ω–∏–≥–∏ —Å –∞–≤—Ç–æ—Ä–∞–º–∏,
* –∫–Ω–∏–≥–∏ –±–µ–∑ –∞–≤—Ç–æ—Ä–∞,
* –∞–≤—Ç–æ—Ä—ã –±–µ–∑ –∫–Ω–∏–≥.

---

## 5. CROSS JOIN

5.1. –ü–æ—Å—Ç—Ä–æ–π—Ç–µ —Ç–∞–±–ª–∏—Ü—É –≤—Å–µ—Ö –ø–∞—Ä (–±–∏–±–ª–∏–æ—Ç–µ–∫–∞, –∫–Ω–∏–≥–∞) –∏ –¥–æ–±–∞–≤—å—Ç–µ –∫–æ–ª–æ–Ω–∫—É `planned_copies = 0`; –æ–≥—Ä–∞–Ω–∏—á—å—Ç–µ –≤—ã–≤–æ–¥ 50 —Å—Ç—Ä–æ–∫–∞–º–∏.
5.2. –ü–æ—Å—Ç—Ä–æ–π—Ç–µ —Ç–∞–±–ª–∏—Ü—É –≤—Å–µ—Ö –ø–∞—Ä (–±–∏–±–ª–∏–æ—Ç–µ–∫–∞, –≥–æ–¥ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏) –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —É–Ω–∏–∫–∞–ª—å–Ω–æ–≥–æ `year_published`.

---

## 6. LATERAL JOIN

6.1. –î–ª—è –∫–∞–∂–¥–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –≤—ã–±–µ—Ä–∏—Ç–µ –æ–¥–Ω—É –∫–Ω–∏–≥—É —Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤; –µ—Å–ª–∏ –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫–µ –Ω–µ—Ç –∫–Ω–∏–≥ ‚Äî –≤–µ—Ä–Ω—É—Ç—å —Å—Ç—Ä–æ–∫—É —Å NULL –≤–º–µ—Å—Ç–æ –¥–∞–Ω–Ω—ã—Ö –æ –∫–Ω–∏–≥–µ.
6.2. –î–ª—è –∫–∞–∂–¥–æ–≥–æ –∞–≤—Ç–æ—Ä–∞ –≤—ã–±–µ—Ä–∏—Ç–µ –¥–≤–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏, –≤ –∫–æ—Ç–æ—Ä—ã—Ö –µ–≥–æ –∫–Ω–∏–≥–∏ –≤—Å—Ç—Ä–µ—á–∞—é—Ç—Å—è —á–∞—â–µ –≤—Å–µ–≥–æ (–ø–æ —Å—É–º–º–µ quantity).

---

## 7. SELF JOIN

7.1. –ù–∞–π–¥–∏—Ç–µ –ø–∞—Ä—ã –∞–≤—Ç–æ—Ä–æ–≤, —Ä–æ–¥–∏–≤—à–∏—Ö—Å—è –≤ –æ–¥–∏–Ω –≥–æ–¥, –∏—Å–∫–ª—é—á–∞—è –æ–±—Ä–∞—Ç–Ω—ã–µ –¥—É–±–ª–∏–∫–∞—Ç—ã (A‚ÄìB, –Ω–æ –Ω–µ B‚ÄìA).
7.2. –ù–∞–π–¥–∏—Ç–µ –ø–∞—Ä—ã –∫–Ω–∏–≥, –≤—ã–ø—É—â–µ–Ω–Ω—ã—Ö –≤ –æ–¥–∏–Ω –≥–æ–¥, –Ω–æ –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã—Ö —Ä–∞–∑–Ω—ã–º–∏ –∞–≤—Ç–æ—Ä–∞–º–∏, –∏—Å–∫–ª—é—á–∞—è –¥—É–±–ª–∏.

---

</details>

---

<details>
<summary><strong style="font-size: 16px;">–í–∞—Ä–∏–∞–Ω—Ç 2</strong></summary>

–í–∞–º –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω PostgreSQL-—Å–∫—Ä–∏–ø—Ç, —Å–æ–∑–¥–∞—é—â–∏–π —É—á–µ–±–Ω—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º—ã –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–π.
–û–Ω –≤–∫–ª—é—á–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ —Å—É—â–Ω–æ—Å—Ç–∏:

* **country** ‚Äî —Å—Ç—Ä–∞–Ω—ã, –∫—É–¥–∞ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –ø–æ–µ–∑–¥–∫–∏
* **city** ‚Äî –≥–æ—Ä–æ–¥–∞ –≤ —Ä–∞–∑–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∞—Ö
* **hotel** ‚Äî –æ—Ç–µ–ª–∏ –≤ –≥–æ—Ä–æ–¥–∞—Ö
* **tourist** ‚Äî —Ç—É—Ä–∏—Å—Ç—ã
* **tourist_city** ‚Äî —Å–≤—è–∑—å —Ç—É—Ä–∏—Å—Ç ‚áÑ –≥–æ—Ä–æ–¥ (MtM) —Å —É–∫–∞–∑–∞–Ω–∏–µ–º, –∫–æ–≥–¥–∞ —Ç—É—Ä–∏—Å—Ç –ø–æ—Å–µ—â–∞–ª –≥–æ—Ä–æ–¥
* **hotel_room** ‚Äî —Å–≤—è–∑—å –æ—Ç–µ–ª—å ‚áÑ —Ç–∏–ø –Ω–æ–º–µ—Ä–∞ (MtM) —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–æ–º–Ω–∞—Ç
* **booking** ‚Äî –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Ç—É—Ä–∏—Å—Ç–∞–º–∏ –Ω–æ–º–µ—Ä–æ–≤ –≤ –æ—Ç–µ–ª—è—Ö

---

# üóÉ SQL-—Å–∫—Ä–∏–ø—Ç —Å–æ–∑–¥–∞–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∏ –Ω–∞–ø–æ–ª–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö

```sql
-- ==============================================
-- TRAVEL BOOKING ‚Äî DDL + SEED
-- ==============================================

DROP TABLE IF EXISTS booking CASCADE;
DROP TABLE IF EXISTS hotel_room CASCADE;
DROP TABLE IF EXISTS tourist_city CASCADE;
DROP TABLE IF EXISTS city CASCADE;
DROP TABLE IF EXISTS hotel CASCADE;
DROP TABLE IF EXISTS room_type CASCADE;
DROP TABLE IF EXISTS tourist CASCADE;
DROP TABLE IF EXISTS country CASCADE;

-- -------------------------
-- –°—Ç—Ä–∞–Ω—ã
CREATE TABLE country (
    id SERIAL PRIMARY KEY,
    name TEXT NOT NULL,
    region TEXT
);

-- -------------------------
-- –ì–æ—Ä–æ–¥–∞
CREATE TABLE city (
    id SERIAL PRIMARY KEY,
    name TEXT NOT NULL,
    country_id INT REFERENCES country(id) ON DELETE SET NULL,
    population INT
);

-- -------------------------
-- –¢—É—Ä–∏—Å—Ç—ã
CREATE TABLE tourist (
    id SERIAL PRIMARY KEY,
    name TEXT NOT NULL,
    birth_year INT
);

-- -------------------------
-- MtM: —Ç—É—Ä–∏—Å—Ç ‚áÑ –≥–æ—Ä–æ–¥
CREATE TABLE tourist_city (
    tourist_id INT NOT NULL REFERENCES tourist(id) ON DELETE CASCADE,
    city_id INT NOT NULL REFERENCES city(id) ON DELETE CASCADE,
    visited_at DATE NOT NULL,
    PRIMARY KEY (tourist_id, city_id)
);

-- -------------------------
-- –û—Ç–µ–ª–∏
CREATE TABLE hotel (
    id SERIAL PRIMARY KEY,
    city_id INT REFERENCES city(id) ON DELETE SET NULL,
    name TEXT NOT NULL,
    stars INT,
    year_opened INT
);

-- -------------------------
-- –¢–∏–ø—ã –Ω–æ–º–µ—Ä–æ–≤
CREATE TABLE room_type (
    id SERIAL PRIMARY KEY,
    title TEXT NOT NULL,
    max_guests INT
);

-- -------------------------
-- MtM: –æ—Ç–µ–ª—å ‚áÑ —Ç–∏–ø –Ω–æ–º–µ—Ä–∞
CREATE TABLE hotel_room (
    hotel_id INT NOT NULL REFERENCES hotel(id) ON DELETE CASCADE,
    room_type_id INT NOT NULL REFERENCES room_type(id) ON DELETE CASCADE,
    rooms_available INT NOT NULL CHECK (rooms_available >= 0),
    PRIMARY KEY (hotel_id, room_type_id)
);

-- -------------------------
-- –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
CREATE TABLE booking (
    id SERIAL PRIMARY KEY,
    tourist_id INT REFERENCES tourist(id),
    hotel_id INT REFERENCES hotel(id),
    room_type_id INT REFERENCES room_type(id),
    nights INT CHECK (nights > 0),
    check_in DATE,
    total_price NUMERIC
);

-- ======================================================
-- SEED DATA
-- ======================================================

INSERT INTO country (id, name, region) VALUES
(1, '–ò—Ç–∞–ª–∏—è', '–ï–≤—Ä–æ–ø–∞'),
(2, '–Ø–ø–æ–Ω–∏—è', '–ê–∑–∏—è'),
(3, '–ß–∏–ª–∏', '–Æ–∂–Ω–∞—è –ê–º–µ—Ä–∏–∫–∞'),
(4, '–ò—Å–ª–∞–Ω–¥–∏—è', '–ï–≤—Ä–æ–ø–∞'),
(5, '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è —Å—Ç—Ä–∞–Ω–∞', NULL);

INSERT INTO city (id, name, country_id, population) VALUES
(1, '–†–∏–º', 1, 2800000),
(2, '–ú–∏–ª–∞–Ω', 1, 1400000),
(3, '–¢–æ–∫–∏–æ', 2, 14000000),
(4, '–°–∞–ø–ø–æ—Ä–æ', 2, 1900000),
(5, '–°–∞–Ω—Ç—å—è–≥–æ', 3, 5600000),
(6, '–ü—É–Ω—Ç–∞-–ê—Ä–µ–Ω–∞—Å', 3, 130000),
(7, '–†–µ–π–∫—å—è–≤–∏–∫', 4, 150000),
(8, '–ì–æ—Ä–æ–¥-–ø—Ä–∏–∑—Ä–∞–∫', NULL, NULL);

INSERT INTO tourist (id, name, birth_year) VALUES
(1, '–ê–ª–µ–∫—Å–∞–Ω–¥—Ä', 1990),
(2, '–ú–∞—Ä–∏–Ω–∞', 1985),
(3, '–†–æ–±–µ—Ä—Ç', 1975),
(4, '–¢—É—Ä–∏—Å—Ç –±–µ–∑ –≥–æ—Ä–æ–¥–æ–≤', 2000);

INSERT INTO tourist_city (tourist_id, city_id, visited_at) VALUES
(1, 1, '2022-05-10'),
(1, 3, '2023-11-01'),
(2, 2, '2024-02-12'),
(2, 4, '2025-01-15'),
(3, 5, '2025-03-18');

INSERT INTO hotel (id, city_id, name, stars, year_opened) VALUES
(1, 1, 'Roma Center Hotel', 5, 1990),
(2, 1, 'Budget Inn Rome', 3, 2005),
(3, 3, 'Tokyo Sky Hotel', 4, 2012),
(4, 3, 'Tiny Capsule Hotel', 2, 2018),
(5, 7, 'IceView Hotel', 4, 2020),
(6, NULL, 'Hotel Nowhere', 1, 2000);

INSERT INTO room_type (id, title, max_guests) VALUES
(1, 'Standard', 2),
(2, 'Deluxe', 3),
(3, 'Suite', 4),
(4, 'Capsule', 1);

INSERT INTO hotel_room (hotel_id, room_type_id, rooms_available) VALUES
(1, 1, 10),
(1, 2, 5),
(2, 1, 30),
(3, 1, 50),
(3, 3, 10),
(4, 4, 100),
(5, 3, 3);

INSERT INTO booking (tourist_id, hotel_id, room_type_id, nights, check_in, total_price) VALUES
(1, 1, 2, 3, '2025-10-10', 420),
(1, 3, 1, 5, '2025-11-15', 700),
(2, 4, 4, 2, '2025-09-01', 180),
(3, 5, 3, 1, '2025-07-22', 300);
```

---

# üß© –ó–∞–¥–∞–Ω–∏—è –ø–æ JOIN

## 1. INNER JOIN

1.1. –í—ã–≤–µ–¥–∏—Ç–µ —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –æ—Ç–µ–ª–µ–π —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º –≥–æ—Ä–æ–¥–∞ –∏ —Ä–µ–≥–∏–æ–Ω–∞ —Å—Ç—Ä–∞–Ω—ã, –≤ –∫–æ—Ç–æ—Ä–æ–π —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω –æ—Ç–µ–ª—å.
1.2. –ü–æ–∫–∞–∂–∏—Ç–µ –≤—Å–µ—Ö —Ç—É—Ä–∏—Å—Ç–æ–≤ –∏ –≥–æ—Ä–æ–¥–∞, –∫–æ—Ç–æ—Ä—ã–µ –æ–Ω–∏ –ø–æ—Å–µ—Ç–∏–ª–∏.

---

## 2. LEFT JOIN

2.1. –í—ã–≤–µ–¥–∏—Ç–µ –≤—Å–µ –≥–æ—Ä–æ–¥–∞ –∏ –æ—Ç–µ–ª–∏ –≤ –Ω–∏—Ö; –µ—Å–ª–∏ –≤ –≥–æ—Ä–æ–¥–µ –Ω–µ—Ç –æ—Ç–µ–ª–µ–π, –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è —Å—Ç—Ä–æ–∫–∏ —Å NULL –≤ –∫–æ–ª–æ–Ω–∫–∞—Ö –æ—Ç–µ–ª—è.
2.2. –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç—É—Ä–∏—Å—Ç–∞ –≤—ã–≤–µ–¥–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Å–µ—â—ë–Ω–Ω—ã—Ö –∏–º –≥–æ—Ä–æ–¥–æ–≤, –≤–∫–ª—é—á–∞—è —Ç—É—Ä–∏—Å—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –ø–æ—Å–µ—â–∞–ª–∏ –Ω–∏ –æ–¥–Ω–æ–≥–æ –≥–æ—Ä–æ–¥–∞.

---

## 3. RIGHT JOIN

3.1. –ü–æ–∫–∞–∂–∏—Ç–µ –≤—Å–µ —Å—Ç—Ä–∞–Ω—ã –∏ –∏—Ö –≥–æ—Ä–æ–¥–∞; —Å—Ç—Ä–∞–Ω—ã –±–µ–∑ –≥–æ—Ä–æ–¥–æ–≤ —Ç–∞–∫–∂–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤–∫–ª—é—á–µ–Ω—ã.
3.2. –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ –Ω–æ–º–µ—Ä–∞ –ø–æ–∫–∞–∂–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç–µ–ª–µ–π, –≤ –∫–æ—Ç–æ—Ä—ã—Ö –æ–Ω –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω, –≤–∫–ª—é—á–∞—è –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ.

---

## 4. FULL JOIN

4.1. –ü–æ—Å—Ç—Ä–æ–π—Ç–µ –Ω–∞–±–æ—Ä —Å—Ç—Ä–æ–∫, –æ—Ç—Ä–∞–∂–∞—é—â–∏–π –∫–∞–∂–¥—É—é –∫–æ–º–±–∏–Ω–∞—Ü–∏—é ¬´–≥–æ—Ä–æ–¥ ‚Äî –æ—Ç–µ–ª—å¬ª, –≤–∫–ª—é—á–∞—è –≥–æ—Ä–æ–¥–∞ –±–µ–∑ –æ—Ç–µ–ª–µ–π –∏ –æ—Ç–µ–ª–∏, –Ω–µ –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã–µ –∫ –≥–æ—Ä–æ–¥—É.
4.2. –ü–æ–∫–∞–∂–∏—Ç–µ –≤—Å–µ —Ç–∏–ø—ã –Ω–æ–º–µ—Ä–æ–≤ –∏ –≤—Å–µ –æ—Ç–µ–ª–∏ —Ç–∞–∫, —á—Ç–æ–±—ã –±—ã–ª–∏ –≤–∏–¥–Ω—ã:

* –æ—Ç–µ–ª–∏, –≥–¥–µ —Ç–∏–ø –Ω–æ–º–µ—Ä–∞ –µ—Å—Ç—å,
* –æ—Ç–µ–ª–∏ –±–µ–∑ —ç—Ç–æ–≥–æ —Ç–∏–ø–∞,
* —Ç–∏–ø—ã –Ω–æ–º–µ—Ä–æ–≤, –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –≤–æ –≤—Å–µ—Ö –æ—Ç–µ–ª—è—Ö.

---

## 5. CROSS JOIN

5.1. –°—Ñ–æ—Ä–º–∏—Ä—É–π—Ç–µ –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ –ø–∞—Ä—ã (—Å—Ç—Ä–∞–Ω–∞, —Ç–∏–ø –Ω–æ–º–µ—Ä–∞).
5.2. –°—Ñ–æ—Ä–º–∏—Ä—É–π—Ç–µ –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ —Å–æ—á–µ—Ç–∞–Ω–∏—è (–≥–æ—Ä–æ–¥, –≥–æ–¥ –æ—Ç–∫—Ä—ã—Ç–∏—è –æ—Ç–µ–ª—è), –∏—Å–ø–æ–ª—å–∑—É—è —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è `year_opened`.

---

## 6. LATERAL JOIN

6.1. –î–ª—è –∫–∞–∂–¥–æ–≥–æ –≥–æ—Ä–æ–¥–∞ –≤—ã–±–µ—Ä–∏—Ç–µ –æ–¥–∏–Ω –æ—Ç–µ–ª—å —Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –Ω–æ–º–µ—Ä–æ–≤ (—Å—É–º–º–∞ –≤—Å–µ—Ö —Ç–∏–ø–æ–≤).
6.2. –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç—É—Ä–∏—Å—Ç–∞ –≤—ã–±–µ—Ä–∏—Ç–µ –æ–¥–∏–Ω –µ–≥–æ –ø–æ—Å–ª–µ–¥–Ω–∏–π –≤–∏–∑–∏—Ç (–ø–æ –¥–∞—Ç–µ).

---

## 7. SELF JOIN

7.1. –ù–∞–π–¥–∏—Ç–µ –ø–∞—Ä—ã –≥–æ—Ä–æ–¥–æ–≤, —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–Ω—ã—Ö –≤ –æ–¥–Ω–æ–π —Å—Ç—Ä–∞–Ω–µ, –∏—Å–∫–ª—é—á–∞—è –ø–∞—Ä—ã –≤–∏–¥–∞ A‚ÄìA –∏ –¥—É–±–ª–∏–∫–∞—Ç—ã.
7.2. –ù–∞–π–¥–∏—Ç–µ –ø–∞—Ä—ã —Ç—É—Ä–∏—Å—Ç–æ–≤, —Ä–æ–¥–∏–≤—à–∏—Ö—Å—è –≤ –æ–¥–∏–Ω –≥–æ–¥, –∏—Å–∫–ª—é—á–∞—è –¥—É–±–ª–∏–∫–∞—Ç—ã.


</details>

---

<details>
<summary><strong style="font-size: 16px;">–í–∞—Ä–∏–∞–Ω—Ç 3</strong></summary>

–í–∞–º –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω SQL-—Å–∫—Ä–∏–ø—Ç, —Å–æ–∑–¥–∞—é—â–∏–π —É—á–µ–±–Ω—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –º—É–∑–µ–π–Ω–æ–π –∫–æ–ª–ª–µ–∫—Ü–∏–∏.
–°—Ö–µ–º–∞ –º–æ–¥–µ–ª–∏—Ä—É–µ—Ç:

* —Ö—É–¥–æ–∂–Ω–∏–∫–æ–≤;
* –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –∏—Å–∫—É—Å—Å—Ç–≤–∞ (—á–∞—Å—Ç—å –∏–º–µ–µ—Ç –∞–≤—Ç–æ—Ä–∞, —á–∞—Å—Ç—å ‚Äî –Ω–µ—Ç);
* –º—É–∑–µ–∏ –≤ —Ä–∞–∑–Ω—ã—Ö –≥–æ—Ä–æ–¥–∞—Ö;
* –ø–æ—Å–µ—Ç–∏—Ç–µ–ª–µ–π –º—É–∑–µ–µ–≤;
* –∞–±–æ–Ω–µ–º–µ–Ω—Ç—ã –ø–æ—Å–µ—Ç–∏—Ç–µ–ª–µ–π –Ω–∞ –º—É–∑–µ–∏ (MtM —Å –Ω–æ–º–µ—Ä–æ–º –∞–±–æ–Ω–µ–º–µ–Ω—Ç–∞);
* —Ñ–æ–Ω–¥—ã –º—É–∑–µ–µ–≤ (–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è + –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–∫—Å–ø–æ–Ω–∏—Ä—É–µ–º—ã—Ö —Ä–µ–ø–ª–∏–∫);
* –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∑–∞–π–º—ã –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–π (loan).

---

# üóÉ SQL-–°–∫—Ä–∏–ø—Ç: DDL + SEED

```sql
-- ==============================================
-- MUSEUM COLLECTION ‚Äî DDL + SEED
-- ==============================================

DROP TABLE IF EXISTS loan CASCADE;
DROP TABLE IF EXISTS museum_artwork CASCADE;
DROP TABLE IF EXISTS visitor_museum CASCADE;
DROP TABLE IF EXISTS artwork CASCADE;
DROP TABLE IF EXISTS artist CASCADE;
DROP TABLE IF EXISTS museum CASCADE;
DROP TABLE IF EXISTS visitor CASCADE;

-- -------------------------
-- –•—É–¥–æ–∂–Ω–∏–∫–∏
CREATE TABLE artist (
    id SERIAL PRIMARY KEY,
    name TEXT NOT NULL,
    birth_year INT
);

-- -------------------------
-- –ü—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –∏—Å–∫—É—Å—Å—Ç–≤–∞
CREATE TABLE artwork (
    id SERIAL PRIMARY KEY,
    title TEXT NOT NULL,
    artist_id INT REFERENCES artist(id) ON DELETE SET NULL,
    year_created INT,
    medium TEXT,
    description TEXT
);

-- -------------------------
-- –ú—É–∑–µ–∏
CREATE TABLE museum (
    id SERIAL PRIMARY KEY,
    name TEXT NOT NULL,
    city TEXT,
    established_year INT
);

-- -------------------------
-- –ü–æ—Å–µ—Ç–∏—Ç–µ–ª–∏
CREATE TABLE visitor (
    id SERIAL PRIMARY KEY,
    name TEXT NOT NULL
);

-- -------------------------
-- MtM: visitor ‚áÑ museum (–∞–±–æ–Ω–µ–º–µ–Ω—Ç—ã)
CREATE TABLE visitor_museum (
    museum_id INT NOT NULL REFERENCES museum(id) ON DELETE CASCADE,
    visitor_id INT NOT NULL REFERENCES visitor(id) ON DELETE CASCADE,
    card_number TEXT NOT NULL,
    member_since DATE DEFAULT CURRENT_DATE,
    PRIMARY KEY (museum_id, visitor_id),
    CONSTRAINT uniq_card_per_museum UNIQUE (museum_id, card_number)
);

-- -------------------------
-- MtM: artwork ‚áÑ museum (—ç–∫—Å–ø–æ–∑–∏—Ü–∏–∏)
CREATE TABLE museum_artwork (
    museum_id INT NOT NULL REFERENCES museum(id) ON DELETE CASCADE,
    artwork_id INT NOT NULL REFERENCES artwork(id) ON DELETE CASCADE,
    display_count INT NOT NULL CHECK (display_count >= 0),
    room TEXT,
    PRIMARY KEY (museum_id, artwork_id)
);

-- -------------------------
-- –ó–∞–π–º—ã / –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —ç–∫—Å–ø–æ–∑–∏—Ü–∏–∏
CREATE TABLE loan (
    id SERIAL PRIMARY KEY,
    museum_id INT NOT NULL REFERENCES museum(id) ON DELETE CASCADE,
    card_number TEXT NOT NULL,
    artwork_id INT NOT NULL REFERENCES artwork(id) ON DELETE RESTRICT,
    loan_days INT NOT NULL CHECK (loan_days > 0),
    loaned_at DATE NOT NULL DEFAULT CURRENT_DATE,
    returned_at DATE,
    CONSTRAINT fk_visitor_card FOREIGN KEY (museum_id, card_number)
        REFERENCES visitor_museum (museum_id, card_number)
);

CREATE INDEX idx_loan_card ON loan(museum_id, card_number);
CREATE INDEX idx_loan_artwork ON loan(artwork_id);

-- =========================
-- SEED DATA
-- =========================

-- Artists
INSERT INTO artist (id, name, birth_year) VALUES
(1, '–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤', 1880),
(2, '–ú–∞—Ä–∏—è –ö–æ–∑–ª–æ–≤–∞', 1925),
(3, '–î–∂–æ–Ω –î–æ—É', 1970),
(4, '–ê–Ω–Ω–∞ –ü–µ—Ç—Ä–æ–≤–∞', 1988),
(5, '–ë–µ–∑—ã–º—è–Ω–Ω—ã–π –º–∞—Å—Ç–µ—Ä', NULL),
(6, '–°—Ç–∞—Ä—ã–π —Ö—É–¥–æ–∂–Ω–∏–∫', 1850),
(7, '–ù–æ–≤—ã–π —Ç–∞–ª–∞–Ω—Ç', 1995);

SELECT setval(pg_get_serial_sequence('artist','id'), (SELECT MAX(id) FROM artist));

-- Artwork
INSERT INTO artwork (id, title, artist_id, year_created, medium, description) VALUES
(1, '–£—Ç—Ä–æ –≤ –ø–æ–ª–µ', 1, 1905, '–º–∞—Å–ª–æ', '–ü–µ–π–∑–∞–∂'),
(2, '–ù–æ—á–Ω–æ–π –≥–æ—Ä–æ–¥', 2, 1950, '–∞–∫–≤–∞—Ä–µ–ª—å', '–ì–æ—Ä–æ–¥—Å–∫–æ–π –ø–µ–π–∑–∞–∂'),
(3, '–ê–±—Å—Ç—Ä–∞–∫—Ü–∏—è ‚Ññ1', 3, 2010, '–º–∏–∫—Å—Ç-–º–µ–¥–∏–∞', '–°–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ –∏—Å–∫—É—Å—Å—Ç–≤–æ'),
(4, '–ü–æ—Ä—Ç—Ä–µ—Ç –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–≥–æ', NULL, 1890, '–º–∞—Å–ª–æ', '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π –∞–≤—Ç–æ—Ä'),
(5, '–†–µ–ø–ª–∏–∫–∞ –¥—Ä–µ–≤–Ω–µ–≥–æ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞', NULL, NULL, '–∫–∞–º–µ–Ω—å', '–†–µ–ø–ª–∏–∫–∞'),
(6, '–°—Ç–∞—Ä—ã–π –ø–µ–π–∑–∞–∂', 6, 1875, '–º–∞—Å–ª–æ', '–ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–π –ø–µ–π–∑–∞–∂'),
(7, '–ù–æ–≤–∞—è –≤–æ–ª–Ω–∞', 7, 2020, '—Ü–∏—Ñ—Ä–æ–≤–∞—è –ø–µ—á–∞—Ç—å', '–°–æ–≤—Ä–µ–º–µ–Ω–Ω–æ—Å—Ç—å'),
(8, '–ü–æ—Ä—Ç—Ä–µ—Ç –ê–Ω–Ω—ã', 4, 2016, '–º–∞—Å–ª–æ', '–ü–æ—Ä—Ç—Ä–µ—Ç'),
(9, '–≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç', 3, 2012, '–∏–Ω—Å—Ç–∞–ª–ª—è—Ü–∏—è', '–ò–Ω—Å—Ç–∞–ª–ª—è—Ü–∏—è'),
(10, '–†–µ–¥–∫–∞—è —Ä–∞–±–æ—Ç–∞', NULL, 1800, '—Ç–µ–º–ø–µ—Ä–∞', '–†–∞—Ä–∏—Ç–µ—Ç'),
(11, '–ù–∏–≥–¥–µ –Ω–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω', NULL, 1800, '-', '–†–∞—Ä–∏—Ç–µ—Ç');

SELECT setval(pg_get_serial_sequence('artwork','id'), (SELECT MAX(id) FROM artwork));

-- Museums
INSERT INTO museum (id, name, city, established_year) VALUES
(1, '–ì–æ—Ä–æ–¥—Å–∫–æ–π –º—É–∑–µ–π –∏—Å–∫—É—Å—Å—Ç–≤', '–ú–æ—Å–∫–≤–∞', 1910),
(2, '–ú—É–∑–µ–π —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –∏—Å–∫—É—Å—Å—Ç–≤–∞', '–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥', 1989),
(3, '–ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–π –º—É–∑–µ–π', '–ö–∞–∑–∞–Ω—å', 1950),
(4, '–ß–∞—Å—Ç–Ω–∞—è –≥–∞–ª–µ—Ä–µ—è', '–í–æ–ª–æ–≥–¥–∞', 2005),
(5, '–ú—É–Ω–∏—Ü–∏–ø–∞–ª—å–Ω–∞—è –≥–∞–ª–µ—Ä–µ—è', '–ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥', NULL);

SELECT setval(pg_get_serial_sequence('museum','id'), (SELECT MAX(id) FROM museum));

-- Visitors
INSERT INTO visitor (id, name) VALUES
(1, '–û–ª—å–≥–∞ –°–º–∏—Ä–Ω–æ–≤–∞'),
(2, '–ü–∞–≤–µ–ª –ö—É–∑–Ω–µ—Ü–æ–≤'),
(3, '–ï–ª–µ–Ω–∞ –ù–æ–≤–∏–∫–æ–≤–∞'),
(4, '–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤'),
(5, '–ì–æ—Å—Ç—å –±–µ–∑ –∞–±–æ–Ω–µ–º–µ–Ω—Ç–∞');

SELECT setval(pg_get_serial_sequence('visitor','id'), (SELECT MAX(id) FROM visitor));

-- Visitor_Museum
INSERT INTO visitor_museum (museum_id, visitor_id, card_number, member_since) VALUES
(1, 1, 'M-1001', '2021-04-10'),
(1, 2, 'M-1002', '2022-06-01'),
(2, 3, 'S-2001', '2023-01-15'),
(3, 4, 'K-3001', '2020-09-09'),
(5, 1, 'V-4001', '2024-02-02'),
(4, 1, 'V-4001', '2024-02-02');

-- Museum_Artwork
INSERT INTO museum_artwork (museum_id, artwork_id, display_count, room) VALUES
(1, 1, 1, '–ó–∞–ª 1'),
(1, 2, 2, '–ó–∞–ª 2'),
(1, 4, 1, '–ó–∞–ª 3'),
(1, 6, 1, '–ó–∞–ª 4'),

(2, 3, 3, '–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –∑–∞–ª'),
(2, 5, 2, '–†–µ–ø–ª–∏–∫–∏'),
(2, 9, 1, '–ò–Ω—Å—Ç–∞–ª–ª—è—Ü–∏–∏'),

(3, 6, 1, '–≠–∫—Å–ø–æ–∑–∏—Ü–∏—è 19 –≤.'),
(3, 10, 1, '–†–∞—Ä–∏—Ç–µ—Ç—ã'),

-- –º—É–∑–µ–π 4 ‚Äî –ø—É—Å—Ç–æ–π —Ñ–æ–Ω–¥ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ

(5, 7, 2, '–ù–æ–≤—ã–π –∑–∞–ª'),
(5, 8, 1, '–ü–æ—Ä—Ç—Ä–µ—Ç–Ω–∞—è –≥–∞–ª–µ—Ä–µ—è');

-- Loans
INSERT INTO loan (museum_id, card_number, artwork_id, loan_days, loaned_at) VALUES
(1, 'M-1001', 1, 30, '2025-10-01'),
(1, 'M-1002', 2, 14, '2025-11-01'),
(2, 'S-2001', 3, 60, '2025-09-20'),
(3, 'K-3001', 6, 90, '2025-08-10'),
(5, 'V-4001', 7, 21, '2025-11-10');

-- ==============================================
-- END OF SEED
-- ==============================================
```

---

# üß© –ó–∞–¥–∞–Ω–∏—è –ø–æ JOIN

## 1. INNER JOIN

1.1. –í—ã–≤–µ–¥–∏—Ç–µ —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–π —Å –∏–º–µ–Ω–µ–º –∏—Ö –∞–≤—Ç–æ—Ä–∞ –∏ –≥–æ–¥–æ–º —Å–æ–∑–¥–∞–Ω–∏—è.
1.2. –ü–æ–∫–∞–∂–∏—Ç–µ –ø–∞—Ä—ã (–º—É–∑–µ–π ‚Äî –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ), –∫–æ—Ç–æ—Ä—ã–µ —Ä–µ–∞–ª—å–Ω–æ —ç–∫—Å–ø–æ–Ω–∏—Ä—É—é—Ç—Å—è (display_count > 0).

---

## 2. LEFT JOIN

2.1. –í—ã–≤–µ–¥–∏—Ç–µ –≤—Å–µ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –º—É–∑–µ–∏; –¥–ª—è –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∏–≥–¥–µ –Ω–µ —ç–∫—Å–ø–æ–Ω–∏—Ä—É—é—Ç—Å—è, –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å NULL-–∑–Ω–∞—á–µ–Ω–∏—è.
2.2. –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Ö—É–¥–æ–∂–Ω–∏–∫–∞ –≤—ã–≤–µ–¥–∏—Ç–µ —Å—É–º–º–∞—Ä–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–∫—Å–ø–æ–Ω–∏—Ä—É–µ–º—ã—Ö –∫–æ–ø–∏–π –µ–≥–æ —Ä–∞–±–æ—Ç.

---

## 3. RIGHT JOIN

3.1. –ü–æ–∫–∞–∂–∏—Ç–µ –≤—Å–µ –º—É–∑–µ–∏ –∏ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è, –≤ –Ω–∏—Ö —ç–∫—Å–ø–æ–Ω–∏—Ä—É–µ–º—ã–µ; –º—É–∑–µ–∏ –±–µ–∑ —ç–∫—Å–ø–æ–Ω–∞—Ç–æ–≤ —Ç–æ–∂–µ –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è.
3.2. –î–ª—è –∫–∞–∂–¥–æ–≥–æ –º—É–∑–µ—è –æ–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–π, –≤–∫–ª—é—á–∞—è –º—É–∑–µ–∏ –±–µ–∑ —ç–∫—Å–ø–æ–Ω–∞—Ç–æ–≤.

---

## 4. FULL JOIN

4.1. –í—ã–≤–µ–¥–∏—Ç–µ –æ–±—ä–µ–¥–∏–Ω—ë–Ω–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤—Å–µ—Ö –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–π –∏ –≤—Å–µ—Ö –∑–∞–ø–∏—Å–µ–π museum_artwork, –≤–∫–ª—é—á–∞—è –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –±–µ–∑ –º—É–∑–µ–µ–≤ –∏ –º—É–∑–µ–∏ –±–µ–∑ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–π –∑–∞–ø–∏—Å–∏ artwork.
4.2. –ü–æ—Å—Ç—Ä–æ–π—Ç–µ –ø–æ–ª–Ω—ã–π –ø–µ—Ä–µ—á–µ–Ω—å —Ö—É–¥–æ–∂–Ω–∏–∫–æ–≤ –∏ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–π, –≤–∫–ª—é—á–∞—è —Ö—É–¥–æ–∂–Ω–∏–∫–æ–≤ –±–µ–∑ —Ä–∞–±–æ—Ç –∏ —Ä–∞–±–æ—Ç—ã –±–µ–∑ –∞–≤—Ç–æ—Ä–æ–≤.

---

## 5. CROSS JOIN

5.1. –ü–æ—Å—Ç—Ä–æ–π—Ç–µ —Ç–∞–±–ª–∏—Ü—É –≤—Å–µ—Ö –ø–∞—Ä (–º—É–∑–µ–π, –≥–æ–¥ —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è), –∏—Å–ø–æ–ª—å–∑—É—è distinct –ø–æ year_created.
5.2. –í—ã–≤–µ–¥–∏—Ç–µ –ø–µ—Ä–≤—ã–µ 100 —Å—Ç—Ä–æ–∫ –¥–µ–∫–∞—Ä—Ç–æ–≤–∞ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è (museum √ó artwork).

---

## 6. LATERAL JOIN

6.1. –î–ª—è –∫–∞–∂–¥–æ–≥–æ –º—É–∑–µ—è –≤—ã–±–µ—Ä–∏—Ç–µ –æ–¥–Ω—É —Ä–∞–±–æ—Ç—É —Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–º display_count (–∏–ª–∏ NULL –¥–ª—è –ø—É—Å—Ç—ã—Ö –º—É–∑–µ–µ–≤).
6.2. –î–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ—Å–µ—Ç–∏—Ç–µ–ª—è –≤—ã–±–µ—Ä–∏—Ç–µ –ø–æ—Å–ª–µ–¥–Ω—é—é –≤—ã–¥–∞—á—É (loan) –ø–æ –¥–∞—Ç–µ loaned_at.

---

## 7. SELF JOIN

7.1. –ù–∞–π–¥–∏—Ç–µ –ø–∞—Ä—ã —Ö—É–¥–æ–∂–Ω–∏–∫–æ–≤, —Ä–æ–¥–∏–≤—à–∏—Ö—Å—è –≤ –æ–¥–∏–Ω –≥–æ–¥ (–±–µ–∑ –¥—É–±–ª–µ–π –∏ –±–µ–∑ —Å–∞–º–∏—Ö —Å–µ–±—è).
7.2. –ù–∞–π–¥–∏—Ç–µ –ø–∞—Ä—ã –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–π, —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –≤ –æ–¥–Ω–æ–º –≥–æ–¥—É, —Å –≤—ã–≤–æ–¥–æ–º –Ω–∞–∑–≤–∞–Ω–∏–π –∏ –∞–≤—Ç–æ—Ä–æ–≤ (–µ—Å–ª–∏ –æ–Ω–∏ –µ—Å—Ç—å).


</details>

---

<details>
<summary><strong style="font-size: 16px;">–í–∞—Ä–∏–∞–Ω—Ç 4</strong></summary>

–í–∞–º –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω —É—á–µ–±–Ω—ã–π PostgreSQL-—Å–∫—Ä–∏–ø—Ç, –º–æ–¥–µ–ª–∏—Ä—É—é—â–∏–π –ø—Ä–æ—Å—Ç—É—é —ç–∫–æ—Å–∏—Å—Ç–µ–º—É —Ä–æ–ª–µ–≤–æ–π –∏–≥—Ä—ã:

* **player** ‚Äî —Ä–µ–∞–ª—å–Ω—ã–µ –∏–≥—Ä–æ–∫–∏ (–∞–∫–∫–∞—É–Ω—Ç—ã)
* **character** ‚Äî –∏–≥—Ä–æ–≤—ã–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∏ (–∫–∞–∂–¥—ã–π –ø—Ä–∏–≤—è–∑–∞–Ω –∫ player)
* **item** ‚Äî –ø—Ä–µ–¥–º–µ—Ç—ã (–æ—Ä—É–∂–∏–µ, –±—Ä–æ–Ω—è, –∑–µ–ª—å—è –∏ —Ç.–¥.)
* **location** ‚Äî –ª–æ–∫–∞—Ü–∏–∏ / –≥–æ—Ä–æ–¥–∞ / –ø–æ—Å—Ç—ã
* **guild** ‚Äî –≥–∏–ª—å–¥–∏–∏ –∏–≥—Ä–æ–∫–æ–≤
* **player_guild** ‚Äî MtM —Å–≤—è–∑—å player ‚áÑ guild —Å –∞—Ç—Ä–∏–±—É—Ç–æ–º `member_tag` (–Ω–æ–º–µ—Ä/—Ç—ç–≥ —É—á–∞—Å—Ç–Ω–∏–∫–∞ –≤ –≥–∏–ª—å–¥–∏–∏)
* **character_item** ‚Äî MtM —Å–≤—è–∑—å character ‚áÑ item —Å –∞—Ç—Ä–∏–±—É—Ç–æ–º `quantity` –∏ `equipped`
* **item_location** ‚Äî MtM —Å–≤—è–∑—å item ‚áÑ location —Å –∞—Ç—Ä–∏–±—É—Ç–æ–º `quantity` (—Å–∫–æ–ª—å–∫–æ –ª–µ–∂–∏—Ç/–ø—Ä–æ–¥–∞—ë—Ç—Å—è –≤ –ª–æ–∫–∞—Ü–∏–∏)
* **loan** ‚Äî –≤—Ä–µ–º–µ–Ω–Ω–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ –ø—Ä–µ–¥–º–µ—Ç–∞ (–∞–Ω–∞–ª–æ–≥ –≤—ã–¥–∞—á–∏/—Ä–µ–Ω—Ç—ã) –æ—Ç –ª–æ–∫–∞—Ü–∏–∏ –∏–≥—Ä–æ–∫—É; —Å–æ–¥–µ—Ä–∂–∏—Ç –≤–Ω–µ—à–Ω–µ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ `(guild_id, member_tag)` ‚Äî —Ç.–µ. –µ—Å–ª–∏ –∏–≥—Ä–æ–∫ —Å–æ–≤–µ—Ä—à–∞–ª –¥–µ–π—Å—Ç–≤–∏–µ –∫–∞–∫ —á–ª–µ–Ω –≥–∏–ª—å–¥–∏–∏, —ç—Ç–æ –≤–∏–¥–Ω–æ.

# üóÉ SQL ‚Äî DDL + SEED (RPG)

```sql
-- ==============================================
-- RPG SAMPLE ‚Äî DDL + SEED
-- ==============================================

-- –û—á–∏—Å—Ç–∫–∞
DROP TABLE IF EXISTS loan CASCADE;
DROP TABLE IF EXISTS item_location CASCADE;
DROP TABLE IF EXISTS character_item CASCADE;
DROP TABLE IF EXISTS player_guild CASCADE;
DROP TABLE IF EXISTS item CASCADE;
DROP TABLE IF EXISTS "character" CASCADE;
DROP TABLE IF EXISTS guild CASCADE;
DROP TABLE IF EXISTS location CASCADE;
DROP TABLE IF EXISTS player CASCADE;

-- –ò–≥—Ä–æ–∫–∏ (–∞–∫–∫–∞—É–Ω—Ç—ã)
CREATE TABLE player (
    id SERIAL PRIMARY KEY,
    username TEXT NOT NULL UNIQUE,
    email TEXT
);

-- –ì–∏–ª—å–¥–∏–∏
CREATE TABLE guild (
    id SERIAL PRIMARY KEY,
    name TEXT NOT NULL,
    founded_year INT
);

-- MtM: player <-> guild —Å –∞—Ç—Ä–∏–±—É—Ç–æ–º member_tag
CREATE TABLE player_guild (
    guild_id INT NOT NULL REFERENCES guild(id) ON DELETE CASCADE,
    player_id INT NOT NULL REFERENCES player(id) ON DELETE CASCADE,
    member_tag TEXT NOT NULL,
    joined_at DATE DEFAULT CURRENT_DATE,
    PRIMARY KEY (guild_id, player_id),
    CONSTRAINT uniq_tag_per_guild UNIQUE (guild_id, member_tag)
);

-- –ü–µ—Ä—Å–æ–Ω–∞–∂–∏
CREATE TABLE "character" (
    id SERIAL PRIMARY KEY,
    name TEXT NOT NULL,
    player_id INT NOT NULL REFERENCES player(id) ON DELETE CASCADE,
    class TEXT,
    level INT DEFAULT 1
);

-- –ü—Ä–µ–¥–º–µ—Ç—ã
CREATE TABLE item (
    id SERIAL PRIMARY KEY,
    name TEXT NOT NULL,
    item_type TEXT,
    rarity TEXT,
    description TEXT
);

-- MtM: character <-> item (–∏–Ω–≤–µ–Ω—Ç–∞—Ä—å) —Å quantity, equipped
CREATE TABLE character_item (
    character_id INT NOT NULL REFERENCES "character"(id) ON DELETE CASCADE,
    item_id INT NOT NULL REFERENCES item(id) ON DELETE CASCADE,
    quantity INT NOT NULL CHECK (quantity >= 0),
    equipped BOOLEAN DEFAULT FALSE,
    PRIMARY KEY (character_id, item_id)
);

-- –õ–æ–∫–∞—Ü–∏–∏ (–≥–æ—Ä–æ–¥–∞ / –ø–æ—Å—Ç—ã)
CREATE TABLE location (
    id SERIAL PRIMARY KEY,
    name TEXT NOT NULL,
    region TEXT,
    level_requirement INT
);

-- MtM: item <-> location —Å quantity (–Ω–∞ —Å–∫–ª–∞–¥–µ/–≤ –ø—Ä–æ–¥–∞–∂–µ)
CREATE TABLE item_location (
    location_id INT NOT NULL REFERENCES location(id) ON DELETE CASCADE,
    item_id INT NOT NULL REFERENCES item(id) ON DELETE CASCADE,
    quantity INT NOT NULL CHECK (quantity >= 0),
    vendor_name TEXT,
    PRIMARY KEY (location_id, item_id)
);

-- Loan: –≤—Ä–µ–º–µ–Ω–Ω–∞—è –ø–µ—Ä–µ–¥–∞—á–∞/–∞—Ä–µ–Ω–¥–∞ –ø—Ä–µ–¥–º–µ—Ç–∞ –∏–∑ –ª–æ–∫–∞—Ü–∏–∏ –∏–≥—Ä–æ–∫—É
-- –ü–æ–ª–µ guild_id + member_tag –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è —Å—Å—ã–ª–∫–∏ –Ω–∞ –∑–∞–ø–∏—Å—å player_guild (–µ—Å–ª–∏ –∏–≥—Ä–æ–∫ –¥–µ–π—Å—Ç–≤—É–µ—Ç –∫–∞–∫ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç–µ–ª—å –≥–∏–ª—å–¥–∏–∏).
CREATE TABLE loan (
    id SERIAL PRIMARY KEY,
    location_id INT NOT NULL REFERENCES location(id) ON DELETE CASCADE,
    guild_id INT,
    member_tag TEXT,
    player_id INT NOT NULL REFERENCES player(id) ON DELETE CASCADE,
    item_id INT NOT NULL REFERENCES item(id) ON DELETE RESTRICT,
    loan_days INT NOT NULL CHECK (loan_days > 0),
    loaned_at DATE NOT NULL DEFAULT CURRENT_DATE,
    returned_at DATE,
    CONSTRAINT fk_player_guild_pair FOREIGN KEY (guild_id, member_tag)
        REFERENCES player_guild (guild_id, member_tag)
        ON DELETE RESTRICT
);

CREATE INDEX idx_loan_player ON loan(player_id);
CREATE INDEX idx_loan_item ON loan(item_id);

-- =========================
-- SEED DATA
-- =========================

-- Players
INSERT INTO player (id, username, email) VALUES
(1, 'hero_ivan', 'ivan@example.com'),
(2, 'mage_maria', 'maria@example.com'),
(3, 'rogue_oleg', 'oleg@example.com'),
(4, 'newbie', NULL),
(5, 'loner', 'solo@example.com');

SELECT setval(pg_get_serial_sequence('player','id'), (SELECT MAX(id) FROM player));

-- Guilds
INSERT INTO guild (id, name, founded_year) VALUES
(1, 'Order of Dawn', 2010),
(2, 'Shadow Syndicate', 2018),
(3, 'Wandering Minstrels', NULL); -- –≥–∏–ª—å–¥–∏—è –±–µ–∑ —á–ª–µ–Ω–æ–≤

SELECT setval(pg_get_serial_sequence('guild','id'), (SELECT MAX(id) FROM guild));

-- Player-Guild memberships
INSERT INTO player_guild (guild_id, player_id, member_tag, joined_at) VALUES
(1, 1, 'D-1001', '2020-01-15'),
(1, 2, 'D-1002', '2021-03-20'),
(2, 3, 'S-3001', '2022-07-07'),
-- player 4 –∏ 5 –Ω–µ —Å–æ—Å—Ç–æ—è—Ç –≤ –≥–∏–ª—å–¥–∏—è—Ö
(1, 5, 'D-1005', '2024-05-05');

-- Characters
INSERT INTO "character" (id, name, player_id, class, level) VALUES
(1, 'Ivan the Brave', 1, 'Warrior', 35),
(2, 'Maria the Wise', 2, 'Mage', 40),
(3, 'Oleg Shadowstep', 3, 'Rogue', 27),
(4, 'Novice Pete', 4, 'Peasant', 2),
(5, 'Solo Wanderer', 5, 'Ranger', 18);

SELECT setval(pg_get_serial_sequence('character','id'), (SELECT MAX(id) FROM "character"));

-- Items
INSERT INTO item (id, name, item_type, rarity, description) VALUES
(1, 'Sword of Dawn', 'Weapon', 'Epic', 'Ancient blade of the Dawn.'),
(2, 'Common Potion', 'Consumable', 'Common', 'Restores 50 HP.'),
(3, 'Shadow Dagger', 'Weapon', 'Rare', 'Favored by assassins.'),
(4, 'Traveler Cloak', 'Armor', 'Uncommon', 'Light cloak for travelers.'),
(5, 'Ancient Tome', 'Misc', 'Legendary', 'Contains forbidden knowledge.'),
(6, 'Wooden Shield', 'Armor', 'Common', 'Basic protection.'),
(7, 'Boots of Swiftness', 'Armor', 'Rare', 'Increases speed.');

SELECT setval(pg_get_serial_sequence('item','id'), (SELECT MAX(id) FROM item));

-- Character inventory (character_item)
INSERT INTO character_item (character_id, item_id, quantity, equipped) VALUES
(1, 1, 1, TRUE),   -- Ivan has Sword of Dawn equipped
(1, 6, 1, TRUE),   -- Ivan has Wooden Shield equipped
(2, 2, 5, FALSE),  -- Maria has potions
(2, 5, 1, FALSE),  -- Maria carries Ancient Tome (not equipped)
(3, 3, 1, TRUE),   -- Oleg has Shadow Dagger
(5, 4, 1, TRUE),   -- Solo Wanderer has cloak
-- character 4 (Novice Pete) has no items -> useful for LEFT JOIN demos
-- item 7 (Boots of Swiftness) currently not owned by anyone

-- Locations
INSERT INTO location (id, name, region, level_requirement) VALUES
(1, 'Sunhold', 'Northern Plains', 1),
(2, 'Shadowport', 'Coastlands', 10),
(3, 'Magehaven', 'Highlands', 20),
(4, 'Old Ruins', 'Badlands', 15),
(5, 'Lonely Inn', 'Crossroads', NULL);

SELECT setval(pg_get_serial_sequence('location','id'), (SELECT MAX(id) FROM location));

-- Item availability in locations (item_location)
INSERT INTO item_location (location_id, item_id, quantity, vendor_name) VALUES
(1, 2, 50, 'Alchemist Borya'),
(1, 6, 10, 'Blacksmith Tor'),
(2, 3, 2, 'Shadow Vendor'),
(2, 7, 1, 'Bootmaster'),
(3, 5, 1, 'Archivist'),
(4, 4, 3, 'Rogue Market'),
-- item 1 (Sword of Dawn) is not sold in locations (rare / owned)
-- item 7 present in location 2 as well as possibly elsewhere
(5, 2, 10, 'Innkeeper');

-- Loans: temporary transfer from location to player (some loans reference guild membership via (guild_id, member_tag))
INSERT INTO loan (location_id, guild_id, member_tag, player_id, item_id, loan_days, loaned_at) VALUES
(1, 1, 'D-1001', 1, 2, 7, '2025-11-01'),  -- Ivan (as guild rep) borrowed potion
(3, NULL, NULL, 2, 5, 30, '2025-10-15'),   -- Maria borrowed Ancient Tome directly (no guild tag)
(2, 2, 'S-3001', 3, 3, 14, '2025-11-05'),  -- Oleg borrowed Shadow Dagger via guild proxy
(5, 1, 'D-1005', 5, 2, 3, '2025-11-10');   -- Solo (member_tag D-1005) borrowed potion from Lonely Inn

-- ==============================================
-- END OF RPG SEED
-- ==============================================
```

---

# üß© –ó–∞–¥–∞–Ω–∏—è –ø–æ JOIN

## 1. INNER JOIN

1.1. –í—ã–≤–µ–¥–∏—Ç–µ –≤—Å–µ—Ö –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π —Å –∏—Ö –≤–ª–∞–¥–µ–ª—å—Ü–∞–º–∏ (username) –∏ –∫–ª–∞—Å—Å–æ–º.
1.2. –ü–æ–∫–∞–∂–∏—Ç–µ –ø–∞—Ä—ã (location ‚Äî item) —Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–µ—Ö –ø—Ä–µ–¥–º–µ—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ—Å—Ç—É–ø–Ω—ã –≤ –ª–æ–∫–∞—Ü–∏–∏ (quantity > 0): –Ω–∞–∑–≤–∞–Ω–∏–µ –ª–æ–∫–∞—Ü–∏–∏, –∏–º—è –ø—Ä–µ–¥–º–µ—Ç–∞, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ, vendor_name.

---

## 2. LEFT JOIN

2.1. –í—ã–≤–µ–¥–∏—Ç–µ –≤—Å–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∏ –∏ –ø—Ä–µ–¥–º–µ—Ç—ã –∏–∑ –∏—Ö –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è; –¥–ª—è –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π –±–µ–∑ –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –ø–æ–ª—è –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å NULL.
2.2. –î–ª—è –∫–∞–∂–¥–æ–≥–æ –∏–≥—Ä–æ–∫–∞ –≤—ã–≤–µ–¥–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π, –∫–æ—Ç–æ—Ä—ã–µ —É –Ω–µ–≥–æ –µ—Å—Ç—å (–≤–∫–ª—é—á–∞—è –∏–≥—Ä–æ–∫–æ–≤ –±–µ–∑ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π).

---

## 3. RIGHT JOIN

3.1. –ü–æ–∫–∞–∂–∏—Ç–µ –≤—Å–µ –ª–æ–∫–∞—Ü–∏–∏ –∏ –ø—Ä–µ–¥–º–µ—Ç—ã –≤ –Ω–∏—Ö; –ª–æ–∫–∞—Ü–∏–∏ –±–µ–∑ –ø—Ä–µ–¥–º–µ—Ç–æ–≤ —Ç–∞–∫–∂–µ –¥–æ–ª–∂–Ω—ã –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è.
3.2. –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ –ø—Ä–µ–¥–º–µ—Ç–∞ (item_type) –ø–æ—Å—á–∏—Ç–∞–π—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ª–æ–∫–∞—Ü–∏–π, –≥–¥–µ –æ–Ω –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω, –≤–∫–ª—é—á–∞—è —Ç–∏–ø—ã, –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –≤ –º–∞–≥–∞–∑–∏–Ω–∞—Ö.

---

## 4. FULL JOIN

4.1. –ü–æ—Å—Ç—Ä–æ–π—Ç–µ –æ–±—ä–µ–¥–∏–Ω—ë–Ω–Ω—ã–π –≤—ã–≤–æ–¥ –≤—Å–µ—Ö item –∏ –≤—Å–µ—Ö –∑–∞–ø–∏—Å–µ–π item_location —Ç–∞–∫, —á—Ç–æ–±—ã –±—ã–ª–∏ –≤–∏–¥–Ω—ã: –ø—Ä–µ–¥–º–µ—Ç—ã –±–µ–∑ –ª–æ–∫–∞—Ü–∏–π –∏ –∑–∞–ø–∏—Å–∏ –ª–æ–∫–∞—Ü–∏–π –¥–ª—è –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø—Ä–µ–¥–º–µ—Ç–æ–≤ (–µ—Å–ª–∏ —Ç–∞–∫–∏–µ –µ—Å—Ç—å).
4.2. –ü–æ—Å—Ç—Ä–æ–π—Ç–µ –ø–æ–ª–Ω—ã–π –ø–µ—Ä–µ—á–µ–Ω—å player –∏ guild (—á–µ—Ä–µ–∑ player_guild), —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å —Å—Ç—Ä–æ–∫–∏: –∏–≥—Ä–æ–∫–∏ –≤ –≥–∏–ª—å–¥–∏—è—Ö, –∏–≥—Ä–æ–∫–∏ –±–µ–∑ –≥–∏–ª—å–¥–∏–π –∏ –≥–∏–ª—å–¥–∏–∏ –±–µ–∑ —á–ª–µ–Ω–æ–≤.

---

## 5. CROSS JOIN

5.1. –ü–æ—Å—Ç—Ä–æ–π—Ç–µ –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ –ø–∞—Ä—ã (location, item_type) ‚Äî —Ç.–µ. –∫–∞–∂–¥—É—é –ª–æ–∫–∞—Ü–∏—é —Å –∫–∞–∂–¥—ã–º —Ç–∏–ø–æ–º –ø—Ä–µ–¥–º–µ—Ç–∞ (distinct item_type).
5.2. –ü–æ—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–≤—ã–µ 100 —Å—Ç—Ä–æ–∫ –¥–µ–∫–∞—Ä—Ç–æ–≤–∞ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è (character √ó location).

---

## 6. LATERAL JOIN

6.1. –î–ª—è –∫–∞–∂–¥–æ–π –ª–æ–∫–∞—Ü–∏–∏ –≤—ã–±–µ—Ä–∏—Ç–µ –æ–¥–∏–Ω –ø—Ä–µ–¥–º–µ—Ç —Å –Ω–∞–∏–±–æ–ª—å—à–∏–º quantity (–µ—Å–ª–∏ –≤ –ª–æ–∫–∞—Ü–∏–∏ –Ω–µ—Ç –ø—Ä–µ–¥–º–µ—Ç–æ–≤ ‚Äî –≤–µ—Ä–Ω—É—Ç—å NULL –¥–ª—è –ø–æ–ª–µ–π –ø—Ä–µ–¥–º–µ—Ç–∞).
6.2. –î–ª—è –∫–∞–∂–¥–æ–≥–æ –∏–≥—Ä–æ–∫–∞ –≤—ã–±–µ—Ä–∏—Ç–µ –µ–≥–æ –ø–æ—Å–ª–µ–¥–Ω—é—é loan (–ø–æ –¥–∞—Ç–µ loaned_at), –µ—Å–ª–∏ —Ç–∞–∫–∞—è –µ—Å—Ç—å.

---

## 7. SELF JOIN

7.1. –ù–∞–π–¥–∏—Ç–µ –ø–∞—Ä—ã –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π –∏–∑ –æ–¥–Ω–æ–≥–æ –∏–≥—Ä–æ–∫–∞, –Ω–æ —Ä–∞–∑–Ω—ã—Ö –∏–º—ë–Ω (A‚ÄìB, –±–µ–∑ –¥—É–±–ª–µ–π –∏ –±–µ–∑ A‚ÄìA).
7.2. –ù–∞–π–¥–∏—Ç–µ –ø–∞—Ä—ã –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –æ–¥–∏–Ω–∞–∫–æ–≤–æ–≥–æ rarity, –∏—Å–∫–ª—é—á–∞—è –ø–∞—Ä—ã –ø—Ä–µ–¥–º–µ—Ç-—Å–∞–º-—Å–æ–±–æ–π –∏ –¥—É–±–ª–∏.

</details>

---

<details>
<summary><strong style="font-size: 16px;">–í–∞—Ä–∏–∞–Ω—Ç 5</strong></summary>

–í–∞–º –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω —É—á–µ–±–Ω—ã–π PostgreSQL-—Å–∫—Ä–∏–ø—Ç, –º–æ–¥–µ–ª–∏—Ä—É—é—â–∏–π —É–ø—Ä–æ—â—ë–Ω–Ω—É—é –≤—Å–µ–ª–µ–Ω–Ω—É—é –Ω–∞—É—á–Ω–æ-—Ñ–∞–Ω—Ç–∞—Å—Ç–∏—á–µ—Å–∫–æ–π –æ–Ω–ª–∞–π–Ω-–∏–≥—Ä—ã:

* **player** ‚Äî –ø–∏–ª–æ—Ç—ã/–∫–∞–ø–∏—Ç–∞–Ω—ã (–∏–≥—Ä–æ–≤—ã–µ –∞–∫–∫–∞—É–Ω—Ç—ã);
* **faction** ‚Äî —Ñ—Ä–∞–∫—Ü–∏–∏ (–∫–æ—Ä–ø–æ—Ä–∞—Ü–∏–∏, –∫–ª–∞–Ω—ã);
* **player_faction** ‚Äî —Å–≤—è–∑—å player ‚áÑ faction (MtM) —Å –∞—Ç—Ä–∏–±—É—Ç–æ–º `call_sign` (–ø–æ–∑—ã–≤–Ω–æ–π –≤–Ω—É—Ç—Ä–∏ —Ñ—Ä–∞–∫—Ü–∏–∏);
* **planet** ‚Äî –ø–ª–∞–Ω–µ—Ç—ã;
* **station** ‚Äî –æ—Ä–±–∏—Ç–∞–ª—å–Ω—ã–µ —Å—Ç–∞–Ω—Ü–∏–∏ (—á–∞—Å—Ç—å –ø—Ä–∏–≤—è–∑–∞–Ω–∞ –∫ –ø–ª–∞–Ω–µ—Ç–∞–º, —á–∞—Å—Ç—å ‚Äî –≤ –≥–ª—É–±–æ–∫–æ–º –∫–æ—Å–º–æ—Å–µ);
* **spaceship** ‚Äî –∫–æ—Ä–∞–±–ª–∏ –∏–≥—Ä–æ–∫–æ–≤;
* **module** ‚Äî –º–æ–¥—É–ª–∏ –∫–æ—Ä–∞–±–ª–µ–π (–æ—Ä—É–∂–∏–µ, —â–∏—Ç—ã, –¥–≤–∏–≥–∞—Ç–µ–ª–∏ –∏ —Ç.–ø.);
* **spaceship_module** ‚Äî —Å–≤—è–∑—å spaceship ‚áÑ module (–∏–Ω–≤–µ–Ω—Ç–∞—Ä—å/—É—Å—Ç–∞–Ω–æ–≤–∫–∞ –º–æ–¥—É–ª–µ–π) —Å –∞—Ç—Ä–∏–±—É—Ç–∞–º–∏ `quantity` –∏ `equipped`;
* **module_station** ‚Äî —Å–≤—è–∑—å module ‚áÑ station —Å –∞—Ç—Ä–∏–±—É—Ç–æ–º `quantity` (—Å–∫–æ–ª—å–∫–æ –º–æ–¥—É–ª–µ–π –ø—Ä–æ–¥–∞—ë—Ç—Å—è/–ª–µ–∂–∏—Ç –Ω–∞ —Å–∫–ª–∞–¥–µ —Å—Ç–∞–Ω—Ü–∏–∏);
* **contract** ‚Äî –±–æ–µ–≤—ã–µ/—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã, –≤—ã–¥–∞–Ω–Ω—ã–µ —Å—Ç–∞–Ω—Ü–∏–µ–π –∏–≥—Ä–æ–∫—É –Ω–∞ –∫–æ—Ä–∞–±–ª–µ, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –æ—Ç –∏–º–µ–Ω–∏ —Ñ—Ä–∞–∫—Ü–∏–∏ (—á–µ—Ä–µ–∑ `(faction_id, call_sign)`).

---

## üóÉ SQL ‚Äî DDL + SEED (Sci-fi)

```sql
-- ==============================================
-- SCI-FI RPG SAMPLE ‚Äî DDL + SEED
-- ==============================================

-- –û—á–∏—Å—Ç–∫–∞
DROP TABLE IF EXISTS contract CASCADE;
DROP TABLE IF EXISTS module_station CASCADE;
DROP TABLE IF EXISTS spaceship_module CASCADE;
DROP TABLE IF EXISTS player_faction CASCADE;
DROP TABLE IF EXISTS module CASCADE;
DROP TABLE IF EXISTS spaceship CASCADE;
DROP TABLE IF EXISTS station CASCADE;
DROP TABLE IF EXISTS planet CASCADE;
DROP TABLE IF EXISTS faction CASCADE;
DROP TABLE IF EXISTS player CASCADE;

-- –ò–≥—Ä–æ–∫–∏ (–∫–∞–ø–∏—Ç–∞–Ω—ã)
CREATE TABLE player (
    id SERIAL PRIMARY KEY,
    nickname TEXT NOT NULL UNIQUE,
    email TEXT
);

-- –§—Ä–∞–∫—Ü–∏–∏
CREATE TABLE faction (
    id SERIAL PRIMARY KEY,
    name TEXT NOT NULL,
    alignment TEXT
);

-- –°–≤—è–∑—å player <-> faction —Å –ø–æ–∑—ã–≤–Ω—ã–º
CREATE TABLE player_faction (
    faction_id INT NOT NULL REFERENCES faction(id) ON DELETE CASCADE,
    player_id INT NOT NULL REFERENCES player(id) ON DELETE CASCADE,
    call_sign TEXT NOT NULL,
    joined_at DATE DEFAULT CURRENT_DATE,
    PRIMARY KEY (faction_id, player_id),
    CONSTRAINT uniq_call_sign_per_faction UNIQUE (faction_id, call_sign)
);

-- –ü–ª–∞–Ω–µ—Ç—ã
CREATE TABLE planet (
    id SERIAL PRIMARY KEY,
    name TEXT NOT NULL,
    sector TEXT,
    population BIGINT
);

-- –°—Ç–∞–Ω—Ü–∏–∏ (—á–∞—Å—Ç—å –ø—Ä–∏–≤—è–∑–∞–Ω–∞ –∫ –ø–ª–∞–Ω–µ—Ç–∞–º, —á–∞—Å—Ç—å ‚Äî –≤ –≥–ª—É–±–æ–∫–æ–º –∫–æ—Å–º–æ—Å–µ)
CREATE TABLE station (
    id SERIAL PRIMARY KEY,
    name TEXT NOT NULL,
    planet_id INT REFERENCES planet(id) ON DELETE SET NULL,
    orbit_altitude_km INT
);

-- –ö–æ—Ä–∞–±–ª–∏
CREATE TABLE spaceship (
    id SERIAL PRIMARY KEY,
    name TEXT NOT NULL,
    player_id INT NOT NULL REFERENCES player(id) ON DELETE CASCADE,
    class TEXT,
    hull_points INT
);

-- –ú–æ–¥—É–ª–∏ (–æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ)
CREATE TABLE module (
    id SERIAL PRIMARY KEY,
    name TEXT NOT NULL,
    module_type TEXT,
    rarity TEXT,
    power_usage INT,
    description TEXT
);

-- –°–≤—è–∑—å spaceship <-> module (–∏–Ω–≤–µ–Ω—Ç–∞—Ä—å/—É—Å—Ç–∞–Ω–æ–≤–∫–∞)
CREATE TABLE spaceship_module (
    spaceship_id INT NOT NULL REFERENCES spaceship(id) ON DELETE CASCADE,
    module_id INT NOT NULL REFERENCES module(id) ON DELETE CASCADE,
    quantity INT NOT NULL CHECK (quantity >= 0),
    equipped BOOLEAN DEFAULT FALSE,
    PRIMARY KEY (spaceship_id, module_id)
);

-- –õ–æ–∫–∞—Ü–∏—è –º–æ–¥—É–ª–µ–π –Ω–∞ —Å—Ç–∞–Ω—Ü–∏—è—Ö (–º–∞–≥–∞–∑–∏–Ω—ã/—Å–∫–ª–∞–¥—ã)
CREATE TABLE module_station (
    station_id INT NOT NULL REFERENCES station(id) ON DELETE CASCADE,
    module_id INT NOT NULL REFERENCES module(id) ON DELETE CASCADE,
    quantity INT NOT NULL CHECK (quantity >= 0),
    vendor_name TEXT,
    PRIMARY KEY (station_id, module_id)
);

-- –ö–æ–Ω—Ç—Ä–∞–∫—Ç—ã (–∑–∞–¥–∞–Ω–∏—è)
CREATE TABLE contract (
    id SERIAL PRIMARY KEY,
    station_id INT NOT NULL REFERENCES station(id) ON DELETE CASCADE,
    faction_id INT,
    call_sign TEXT,
    player_id INT NOT NULL REFERENCES player(id) ON DELETE CASCADE,
    spaceship_id INT NOT NULL REFERENCES spaceship(id) ON DELETE CASCADE,
    module_id INT REFERENCES module(id) ON DELETE SET NULL,
    reward_credits INT,
    duration_days INT NOT NULL CHECK (duration_days > 0),
    accepted_at DATE NOT NULL DEFAULT CURRENT_DATE,
    completed_at DATE,
    CONSTRAINT fk_faction_call_sign FOREIGN KEY (faction_id, call_sign)
        REFERENCES player_faction (faction_id, call_sign)
        ON DELETE RESTRICT
);

CREATE INDEX idx_contract_player ON contract(player_id);
CREATE INDEX idx_contract_station ON contract(station_id);
CREATE INDEX idx_contract_module ON contract(module_id);

-- =========================
-- SEED DATA
-- =========================

-- Players
INSERT INTO player (id, nickname, email) VALUES
(1, 'NovaCaptain', 'nova@example.com'),
(2, 'QuantumMage', 'quantum@example.com'),
(3, 'ShadowRunner', 'shadow@example.com'),
(4, 'NewPilot', NULL),
(5, 'LoneWolf', 'lonewolf@example.com');

SELECT setval(pg_get_serial_sequence('player','id'), (SELECT MAX(id) FROM player));

-- Factions
INSERT INTO faction (id, name, alignment) VALUES
(1, 'Solar Union', 'Lawful'),
(2, 'Void Corsairs', 'Chaotic'),
(3, 'Neutral Traders Guild', 'Neutral');

SELECT setval(pg_get_serial_sequence('faction','id'), (SELECT MAX(id) FROM faction));

-- Player-Faction
INSERT INTO player_faction (faction_id, player_id, call_sign, joined_at) VALUES
(1, 1, 'SUN-001', '2023-01-10'),
(1, 2, 'SUN-002', '2023-06-05'),
(2, 3, 'VOID-777', '2024-02-12'),
-- LoneWolf –≤ Solar Union
(1, 5, 'SUN-009', '2024-11-01');
-- NewPilot (4) –ø–æ–∫–∞ –±–µ–∑ —Ñ—Ä–∞–∫—Ü–∏–π
-- Neutral Traders Guild –≤—Ä–µ–º–µ–Ω–Ω–æ –±–µ–∑ —á–ª–µ–Ω–æ–≤

-- Planets
INSERT INTO planet (id, name, sector, population) VALUES
(1, 'Terra Prime', 'Core', 12000000000),
(2, 'New Horizon', 'Rim', 500000000),
(3, 'Astra-7', 'Outer Belt', 12000000),
(4, 'Dead Rock', 'Void Edge', NULL);

SELECT setval(pg_get_serial_sequence('planet','id'), (SELECT MAX(id) FROM planet));

-- Stations
INSERT INTO station (id, name, planet_id, orbit_altitude_km) VALUES
(1, 'Terra Orbital Hub', 1, 350),
(2, 'Horizon Trade Ring', 2, 420),
(3, 'Astra Mining Station', 3, 120),
(4, 'Deep Void Relay', NULL, 0),     -- —Å—Ç–∞–Ω—Ü–∏—è –≤ –≥–ª—É–±–æ–∫–æ–º –∫–æ—Å–º–æ—Å–µ
(5, 'Horizon Research Spire', 2, 600);

SELECT setval(pg_get_serial_sequence('station','id'), (SELECT MAX(id) FROM station));

-- Spaceships
INSERT INTO spaceship (id, name, player_id, class, hull_points) VALUES
(1, 'SS Nova Light', 1, 'Frigate', 3000),
(2, 'QMC Entangler', 2, 'Cruiser', 4500),
(3, 'Shadow Dancer', 3, 'Corvette', 2800),
(4, 'Rookie Shuttle', 4, 'Shuttle', 800),
(5, 'Wolf Fang', 5, 'Destroyer', 3800);

SELECT setval(pg_get_serial_sequence('spaceship','id'), (SELECT MAX(id) FROM spaceship));

-- Modules
INSERT INTO module (id, name, module_type, rarity, power_usage, description) VALUES
(1, 'Plasma Cannon Mk I', 'Weapon', 'Rare', 50, 'Basic plasma weapon.'),
(2, 'Shield Generator Alpha', 'Defense', 'Uncommon', 40, 'Standard shield generator.'),
(3, 'Warp Drive Beta', 'Engine', 'Epic', 60, 'Improved warp capabilities.'),
(4, 'Cargo Hold Extender', 'Utility', 'Common', 10, 'Increases cargo capacity.'),
(5, 'Cloaking Device', 'Stealth', 'Legendary', 70, 'Advanced stealth module.'),
(6, 'Point Defense Laser', 'Weapon', 'Uncommon', 30, 'Anti-missile defense.'),
(7, 'Nanobot Repair Bay', 'Support', 'Rare', 35, 'Automatic hull repair.');

SELECT setval(pg_get_serial_sequence('module','id'), (SELECT MAX(id) FROM module));

-- Spaceship-Module (—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ/—Ö—Ä–∞–Ω–∏–º—ã–µ –º–æ–¥—É–ª–∏)
INSERT INTO spaceship_module (spaceship_id, module_id, quantity, equipped) VALUES
(1, 1, 1, TRUE),   -- Nova Light: Plasma Cannon
(1, 2, 1, TRUE),   -- Nova Light: Shield
(2, 3, 1, TRUE),   -- Entangler: Warp Drive
(2, 4, 2, FALSE),  -- Entangler: Cargo extenders
(3, 1, 1, TRUE),   -- Shadow Dancer: Plasma
(3, 5, 1, TRUE),   -- Shadow Dancer: Cloak
(5, 6, 2, TRUE),   -- Wolf Fang: Point Defense
-- Rookie Shuttle (4) –±–µ–∑ –º–æ–¥—É–ª–µ–π
-- Nanobot Repair Bay (7) –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –Ω–∏ –Ω–∞ –æ–¥–Ω–æ–º –∫–æ—Ä–∞–±–ª–µ

-- Module availability on stations
INSERT INTO module_station (station_id, module_id, quantity, vendor_name) VALUES
(1, 2, 10, 'Terran Shields Inc'),
(1, 4, 25, 'Cargo Solutions'),
(2, 1, 3, 'Horizon Arms'),
(2, 6, 5, 'Defense Matrix'),
(2, 7, 2, 'NanoTech Vendor'),
(3, 4, 8, 'Mining Depot'),
(3, 6, 4, 'Security Hub'),
-- —Å—Ç–∞–Ω—Ü–∏—è 4 (Deep Void Relay) ‚Äî –±–µ–∑ —Ç–æ–≤–∞—Ä–æ–≤
(5, 3, 1, 'Research Labs'),
(5, 5, 1, 'Black Lab Co.');

-- Contracts (–º–∏—Å—Å–∏–∏)
INSERT INTO contract (station_id, faction_id, call_sign, player_id, spaceship_id, module_id, reward_credits, duration_days, accepted_at) VALUES
(1, 1, 'SUN-001', 1, 1, 4, 5000, 7, '2025-11-01'),   -- NovaCaptain –¥–ª—è Solar Union
(2, 1, 'SUN-002', 2, 2, 3, 8000, 10, '2025-10-20'),  -- QuantumMage
(2, 2, 'VOID-777', 3, 3, 1, 7000, 5, '2025-11-05'),  -- ShadowRunner –¥–ª—è Void Corsairs
(3, NULL, NULL, 2, 2, NULL, 3000, 3, '2025-11-10'),  -- –ª–∏—á–Ω—ã–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç, –±–µ–∑ —Ñ—Ä–∞–∫—Ü–∏–∏
(5, 1, 'SUN-009', 5, 5, 7, 9000, 12, '2025-11-12');  -- LoneWolf —á–µ—Ä–µ–∑ Solar Union

-- ==============================================
-- END OF SCI-FI SEED
-- ==============================================
```

---

## üß© –ó–∞–¥–∞–Ω–∏—è –ø–æ JOIN

### 1. INNER JOIN

1.1. –í—ã–≤–µ–¥–∏—Ç–µ –≤—Å–µ—Ö –∫–æ—Ä–∞–±–ª–µ–π —Å –∏—Ö –≤–ª–∞–¥–µ–ª—å—Ü–∞–º–∏: –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–æ—Ä–∞–±–ª—è, –∫–ª–∞—Å—Å, hull_points –∏ nickname –∏–≥—Ä–æ–∫–∞.
1.2. –í—ã–≤–µ–¥–∏—Ç–µ —Å–ø–∏—Å–æ–∫ –º–æ–¥—É–ª–µ–π, —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –Ω–∞ –∫–æ—Ä–∞–±–ª—è—Ö: –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–æ—Ä–∞–±–ª—è, –∏–º—è –º–æ–¥—É–ª—è, module_type, quantity –∏ –ø—Ä–∏–∑–Ω–∞–∫ equipped.

---

### 2. LEFT JOIN

2.1. –í—ã–≤–µ–¥–∏—Ç–µ –≤—Å–µ—Ö –∫–æ—Ä–∞–±–ª–µ–π –∏ –∏—Ö –º–æ–¥—É–ª–∏, –≤–∫–ª—é—á–∞—è –∫–æ—Ä–∞–±–ª–∏ –±–µ–∑ –º–æ–¥—É–ª–µ–π (–ø–æ–ª—è –º–æ–¥—É–ª–µ–π –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å NULL, –µ—Å–ª–∏ –º–æ–¥—É–ª–µ–π –Ω–µ—Ç).
2.2. –î–ª—è –∫–∞–∂–¥–æ–≥–æ –∏–≥—Ä–æ–∫–∞ –≤—ã–≤–µ–¥–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ—Ä–∞–±–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–º–∏ –æ–Ω –≤–ª–∞–¥–µ–µ—Ç (–≤–∫–ª—é—á–∞—è –∏–≥—Ä–æ–∫–æ–≤ –±–µ–∑ –∫–æ—Ä–∞–±–ª–µ–π).

---

### 3. RIGHT JOIN

3.1. –ü–æ–∫–∞–∂–∏—Ç–µ –≤—Å–µ —Å—Ç–∞–Ω—Ü–∏–∏ –∏ –º–æ–¥—É–ª–∏, –¥–æ—Å—Ç—É–ø–Ω—ã–µ –Ω–∞ —ç—Ç–∏—Ö —Å—Ç–∞–Ω—Ü–∏—è—Ö, –≤–∫–ª—é—á–∞—è —Å—Ç–∞–Ω—Ü–∏–∏ –±–µ–∑ –º–æ–¥—É–ª–µ–π.
3.2. –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ –º–æ–¥—É–ª—è (`module_type`) –ø–æ—Å—á–∏—Ç–∞–π—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç–∞–Ω—Ü–∏–π, –Ω–∞ –∫–æ—Ç–æ—Ä—ã—Ö –ø—Ä–æ–¥–∞—ë—Ç—Å—è —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω –º–æ–¥—É–ª—å —ç—Ç–æ–≥–æ —Ç–∏–ø–∞, –≤–∫–ª—é—á–∞—è —Ç–∏–ø—ã, –∫–æ—Ç–æ—Ä—ã–µ –≤–æ–æ–±—â–µ –Ω–µ –ø—Ä–æ–¥–∞—é—Ç—Å—è –Ω–∏ –Ω–∞ –æ–¥–Ω–æ–π —Å—Ç–∞–Ω—Ü–∏–∏.

---

### 4. FULL JOIN

4.1. –ü–æ—Å—Ç—Ä–æ–π—Ç–µ –æ–±—ä–µ–¥–∏–Ω—ë–Ω–Ω—ã–π –≤—ã–≤–æ–¥ –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π –∏ –≤—Å–µ—Ö –∑–∞–ø–∏—Å–µ–π `module_station`, —á—Ç–æ–±—ã –±—ã–ª–∏ –≤–∏–¥–Ω—ã:

* –º–æ–¥—É–ª–∏, –Ω–µ –ø—Ä–æ–¥–∞—é—â–∏–µ—Å—è –Ω–∏ –Ω–∞ –æ–¥–Ω–æ–π —Å—Ç–∞–Ω—Ü–∏–∏;
* –∑–∞–ø–∏—Å–∏ `module_station` (–µ—Å–ª–∏ –±—ã –±—ã–ª–∏ ‚Äú–æ—Å–∏—Ä–æ—Ç–µ–≤—à–∏–µ‚Äù), –¥–ª—è –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–π —Å—Ç—Ä–æ–∫–∏ –≤ `module`;
* –º–æ–¥—É–ª—å, –ø—Ä–æ–¥–∞—é—â–∏–π—Å—è –Ω–∞ –æ–¥–Ω–æ–π –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å—Ç–∞–Ω—Ü–∏—è—Ö.

4.2. –°—Ñ–æ—Ä–º–∏—Ä—É–π—Ç–µ –ø–æ–ª–Ω—ã–π –ø–µ—Ä–µ—á–µ–Ω—å –∏–≥—Ä–æ–∫–æ–≤ –∏ —Ñ—Ä–∞–∫—Ü–∏–π (—á–µ—Ä–µ–∑ `player_faction`), —á—Ç–æ–±—ã –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –±—ã–ª–∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω—ã:

* –∏–≥—Ä–æ–∫–∏, —Å–æ—Å—Ç–æ—è—â–∏–µ –≤ —Ñ—Ä–∞–∫—Ü–∏—è—Ö (—Å —É–∫–∞–∑–∞–Ω–∏–µ–º –Ω–∞–∑–≤–∞–Ω–∏—è —Ñ—Ä–∞–∫—Ü–∏–∏ –∏ call_sign);
* –∏–≥—Ä–æ–∫–∏ –±–µ–∑ —Ñ—Ä–∞–∫—Ü–∏–π;
* —Ñ—Ä–∞–∫—Ü–∏–∏ –±–µ–∑ –∏–≥—Ä–æ–∫–æ–≤.

---

### 5. CROSS JOIN

5.1. –ü–æ—Å—Ç—Ä–æ–π—Ç–µ —Ç–∞–±–ª–∏—Ü—É –≤—Å–µ—Ö –ø–∞—Ä (—Å—Ç–∞–Ω—Ü–∏—è, —Ç–∏–ø –º–æ–¥—É–ª—è) –¥–ª—è –∫–∞–∂–¥–æ–≥–æ `station` –∏ –∫–∞–∂–¥–æ–≥–æ —É–Ω–∏–∫–∞–ª—å–Ω–æ–≥–æ `module_type` (–∏–∑ —Ç–∞–±–ª–∏—Ü—ã `module`).
5.2. –í—ã–≤–µ–¥–∏—Ç–µ –ø–µ—Ä–≤—ã–µ 100 —Å—Ç—Ä–æ–∫ –¥–µ–∫–∞—Ä—Ç–æ–≤–∞ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è (spaceship √ó station): –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–æ—Ä–∞–±–ª—è –∏ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å—Ç–∞–Ω—Ü–∏–∏.

---

### 6. LATERAL JOIN

6.1. –î–ª—è –∫–∞–∂–¥–æ–π —Å—Ç–∞–Ω—Ü–∏–∏ –≤—ã–±–µ—Ä–∏—Ç–µ –æ–¥–∏–Ω –º–æ–¥—É–ª—å, —É –∫–æ—Ç–æ—Ä–æ–≥–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ `quantity` –Ω–∞ —ç—Ç–æ–π —Å—Ç–∞–Ω—Ü–∏–∏; –µ—Å–ª–∏ –Ω–∞ —Å—Ç–∞–Ω—Ü–∏–∏ –≤–æ–æ–±—â–µ –Ω–µ—Ç –º–æ–¥—É–ª–µ–π, –≤–µ—Ä–Ω–∏—Ç–µ —Å—Ç—Ä–æ–∫—É —Å NULL –≤ –ø–æ–ª—è—Ö –º–æ–¥—É–ª—è.
6.2. –î–ª—è –∫–∞–∂–¥–æ–≥–æ –∏–≥—Ä–æ–∫–∞ –≤—ã–±–µ—Ä–∏—Ç–µ –µ–≥–æ –ø–æ—Å–ª–µ–¥–Ω–∏–π (–ø–æ –¥–∞—Ç–µ `accepted_at`) –∫–æ–Ω—Ç—Ä–∞–∫—Ç, –µ—Å–ª–∏ –æ–Ω –µ—Å—Ç—å: –≤—ã–≤–µ—Å—Ç–∏ nickname –∏–≥—Ä–æ–∫–∞, —Å—Ç–∞–Ω—Ü–∏—é, –º–æ–¥—É–ª—å (–µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω) –∏ –¥–∞—Ç—É –ø—Ä–∏–Ω—è—Ç–∏—è.

---

### 7. SELF JOIN

7.1. –ù–∞–π–¥–∏—Ç–µ –ø–∞—Ä—ã –∫–æ—Ä–∞–±–ª–µ–π, –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—â–∏—Ö –æ–¥–Ω–æ–º—É –∏ —Ç–æ–º—É –∂–µ –∏–≥—Ä–æ–∫—É, –Ω–æ —Å —Ä–∞–∑–Ω—ã–º–∏ –∏–º–µ–Ω–∞–º–∏ (–∏—Å–∫–ª—é—á–∏—Ç—å –ø–∞—Ä—ã –≤–∏–¥–∞ A‚ÄìA –∏ –¥—É–±–ª–∏–∫–∞—Ç—ã A‚ÄìB / B‚ÄìA).
7.2. –ù–∞–π–¥–∏—Ç–µ –ø–∞—Ä—ã –º–æ–¥—É–ª–µ–π –æ–¥–∏–Ω–∞–∫–æ–≤–æ–π —Ä–µ–¥–∫–æ—Å—Ç–∏ (`rarity`), –∏—Å–∫–ª—é—á–∞—è –ø–∞—Ä—ã –º–æ–¥—É–ª—å-—Å–∞–º-—Å–æ–±–æ–π –∏ –¥—É–±–ª–∏ (A‚ÄìB –∏ B‚ÄìA —Å—á–∏—Ç–∞—é—Ç—Å—è –æ–¥–Ω–∏–º —Å–æ—á–µ—Ç–∞–Ω–∏–µ–º).


</details>