{% extends "base.html" %}
{% block content %}

<h2>Note: мои объекты</h2>

<table>
  <tr><th>ID</th><th>Owner</th><th>Title</th><th>Действия</th></tr>

  {% for o in objects %}
    <tr>
      <td>{{ o.id }}</td>
      <td>{{ o.owner.username }}</td>
      <td>{{ o.title }}</td>
      <td>
        <a href="/secure/note/{{ o.id }}/">Безопасно</a> |
        <a href="/vuln/note/?id={{ o.id }}">Условно уязвимо (query)</a> |
        <a href="/vuln/note/path/{{ o.id }}/">Условно уязвимо (path)</a>
      </td>
    </tr>
  {% endfor %}
</table>

{% endblock %}

{# ===============================================================
  УДАЛЕНО
  ---------------------------------------------------------------

  <div class="card">
    <strong>Плохая проверка: скрытая форма обновления</strong>
    <form id="editForm" class="hidden" method="post" action="/vuln/note/update/1/">
      {% csrf_token %}
      <input name='title' placeholder="Новое значение">
      <button type="submit">Сохранить</button>
    </form>
    <p class="muted">Уберите класс hidden — форма станет доступной.</p>
  </div>

  ПОЧЕМУ:
  1 Форма отправляла POST на фиксированный ID 1 - IDOR на клиенте
  2 Защита через hidden легко обходится
    Сервер теперь сам проверяет права, скрытая форма не нужна
    Далее note_detail.html
================================================================ #}
